# Using Dida365 API to create tasks
_Exported on 2025/6/28 at GMT+8 15:35:05 from Cursor (1.1.6)_

---

**User**

@https://developer.dida365.com/api#/openapi?id=create-task  è¿™æ˜¯æ»´ç­”æ¸…å•æˆ‘å¸¸ç”¨çš„todoå·¥å…· çš„apiæ–‡æ¡£ åœ¨æ¯æ¬¡æ‰§è¡Œä»»åŠ¡åŽå°† å¾—åˆ°çš„ç»“æžœé€šè¿‡API åˆ›å»ºtask çš„æ–¹å¼ å‘åˆ°æˆ‘çš„å·¥å…·ä¸­ æˆ‘ä¼šå°†access_token ä½¿ç”¨GitHub CI Secrets  çš„æ–¹å¼æä¾›

---

**Cursor**

æˆ‘ä¼šå¸®ä½ å°†æ»´ç­”æ¸…å•APIé›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡æ‰§è¡Œä»»åŠ¡åŽå°†ç»“æžœå‘é€åˆ°ä½ çš„æ»´ç­”æ¸…å•å·¥å…·ã€‚é¦–å…ˆè®©æˆ‘äº†è§£ä¸€ä¸‹é¡¹ç›®çš„ç»“æž„å’ŒçŽ°æœ‰åŠŸèƒ½ã€‚

çŽ°åœ¨æˆ‘äº†è§£äº†é¡¹ç›®ç»“æž„ã€‚è¿™æ˜¯ä¸€ä¸ªArXivè®ºæ–‡ç›‘æŽ§ç³»ç»Ÿï¼Œæˆ‘å°†å¸®ä½ é›†æˆæ»´ç­”æ¸…å•APIï¼Œåœ¨æ¯æ¬¡æ‰§è¡Œä»»åŠ¡åŽå°†ç»“æžœåˆ›å»ºä¸ºæ»´ç­”æ¸…å•ä»»åŠ¡ã€‚

è®©æˆ‘å…ˆåˆ›å»ºæ»´ç­”æ¸…å•APIé›†æˆæ¨¡å—ï¼š

```python
"""
æ»´ç­”æ¸…å•APIé›†æˆæ¨¡å—
æ”¯æŒOAuthè®¤è¯å’Œä»»åŠ¡åˆ›å»ºåŠŸèƒ½
"""

import httpx
import os
import json
from datetime import datetime
from typing import Dict, Any, Optional, List
import logging

# é…ç½®æ—¥å¿—
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

class DidaIntegration:
    """æ»´ç­”æ¸…å•APIé›†æˆç±»"""
    
    def __init__(self, access_token: Optional[str] = None):
        """
        åˆå§‹åŒ–æ»´ç­”æ¸…å•APIå®¢æˆ·ç«¯
        
        Args:
            access_token: è®¿é—®ä»¤ç‰Œï¼Œå¦‚æžœä¸æä¾›ä¼šä»ŽçŽ¯å¢ƒå˜é‡è¯»å–
        """
        self.access_token = access_token or os.getenv('DIDA_ACCESS_TOKEN')
        self.base_url = "https://api.dida365.com/api/v2"
        self.headers = {
            "Authorization": f"Bearer {self.access_token}",
            "Content-Type": "application/json",
            "User-Agent": "ArXiv-Follow-Bot/1.0"
        }
        
        if not self.access_token:
            logger.warning("æœªæ‰¾åˆ°æ»´ç­”æ¸…å•è®¿é—®ä»¤ç‰Œï¼ŒAPIåŠŸèƒ½å°†è¢«ç¦ç”¨")
    
    def is_enabled(self) -> bool:
        """æ£€æŸ¥APIæ˜¯å¦å¯ç”¨"""
        return bool(self.access_token)
    
    def create_task(self, 
                   title: str, 
                   content: str = "", 
                   project_id: str = "inbox", 
                   due_date: Optional[str] = None,
                   priority: int = 0,
                   tags: Optional[List[str]] = None) -> Dict[str, Any]:
        """
        åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
        
        Args:
            title: ä»»åŠ¡æ ‡é¢˜
            content: ä»»åŠ¡å†…å®¹æè¿°
            project_id: é¡¹ç›®IDï¼Œé»˜è®¤ä¸ºæ”¶é›†ç®±("inbox")
            due_date: æˆªæ­¢æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DD
            priority: ä¼˜å…ˆçº§ (0-3ï¼Œ0ä¸ºæ— ï¼Œ3ä¸ºé«˜)
            tags: æ ‡ç­¾åˆ—è¡¨
            
        Returns:
            APIå“åº”ç»“æžœ
        """
        if not self.is_enabled():
            logger.warning("æ»´ç­”æ¸…å•APIæœªå¯ç”¨ï¼Œè·³è¿‡ä»»åŠ¡åˆ›å»º")
            return {"success": False, "error": "APIæœªå¯ç”¨"}
        
        # æž„å»ºä»»åŠ¡æ•°æ®
        task_data = {
            "title": title,
            "content": content,
            "projectId": project_id,
            "priority": priority,
            "kind": "TEXT"
        }
        
        # æ·»åŠ æˆªæ­¢æ—¥æœŸ
        if due_date:
            task_data["dueDate"] = f"{due_date}T23:59:59.000+0000"
        
        # æ·»åŠ æ ‡ç­¾
        if tags:
            task_data["tags"] = tags
        
        try:
            with httpx.Client(timeout=30.0) as client:
                response = client.post(
                    f"{self.base_url}/task",
                    headers=self.headers,
                    json=task_data
                )
                
                if response.status_code == 200:
                    result = response.json()
                    logger.info(f"æˆåŠŸåˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡: {title}")
                    return {
                        "success": True,
                        "task_id": result.get("id"),
                        "title": title,
                        "url": f"https://dida365.com/webapp/#/task/{result.get('id')}"
                    }
                else:
                    logger.error(f"åˆ›å»ºä»»åŠ¡å¤±è´¥: {response.status_code} - {response.text}")
                    return {
                        "success": False,
                        "error": f"HTTP {response.status_code}: {response.text}"
                    }
                    
        except httpx.RequestError as e:
            logger.error(f"ç½‘ç»œè¯·æ±‚é”™è¯¯: {e}")
            return {"success": False, "error": f"ç½‘ç»œé”™è¯¯: {e}"}
        except Exception as e:
            logger.error(f"åˆ›å»ºä»»åŠ¡æ—¶å‘ç”ŸæœªçŸ¥é”™è¯¯: {e}")
            return {"success": False, "error": f"æœªçŸ¥é”™è¯¯: {e}"}
    
    def create_report_task(self, 
                          report_type: str, 
                          summary: str, 
                          details: str = "",
                          paper_count: int = 0) -> Dict[str, Any]:
        """
        åˆ›å»ºè®ºæ–‡ç›‘æŽ§æŠ¥å‘Šä»»åŠ¡
        
        Args:
            report_type: æŠ¥å‘Šç±»åž‹ (daily/weekly/topic)
            summary: æŠ¥å‘Šæ‘˜è¦
            details: è¯¦ç»†å†…å®¹
            paper_count: è®ºæ–‡æ•°é‡
            
        Returns:
            APIå“åº”ç»“æžœ
        """
        if not self.is_enabled():
            return {"success": False, "error": "APIæœªå¯ç”¨"}
        
        # æž„å»ºä»»åŠ¡æ ‡é¢˜
        type_map = {
            "daily": "ðŸ“„ æ¯æ—¥è®ºæ–‡ç›‘æŽ§",
            "weekly": "ðŸ“š å‘¨æŠ¥è®ºæ–‡æ±‡æ€»", 
            "topic": "ðŸŽ¯ ä¸»é¢˜è®ºæ–‡æœç´¢"
        }
        
        title = f"{type_map.get(report_type, 'ðŸ“„ è®ºæ–‡ç›‘æŽ§')} - {datetime.now().strftime('%Y-%m-%d')}"
        
        # æž„å»ºä»»åŠ¡å†…å®¹
        content_parts = [summary]
        
        if paper_count > 0:
            content_parts.append(f"\nðŸ“Š å…±å‘çŽ° {paper_count} ç¯‡è®ºæ–‡")
        
        if details:
            content_parts.append(f"\n\nðŸ“ è¯¦ç»†ä¿¡æ¯:\n{details}")
        
        content_parts.append(f"\nâ° ç”Ÿæˆæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        content_parts.append(f"\nðŸ¤– ç”± ArXiv Follow ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ")
        
        content = "".join(content_parts)
        
        # è®¾ç½®æ ‡ç­¾
        tags = ["arxiv", "è®ºæ–‡ç›‘æŽ§", report_type]
        
        # è®¾ç½®ä¼˜å…ˆçº§ï¼ˆæœ‰è®ºæ–‡æ—¶ä¸ºä¸­ç­‰ä¼˜å…ˆçº§ï¼‰
        priority = 1 if paper_count > 0 else 0
        
        return self.create_task(
            title=title,
            content=content,
            tags=tags,
            priority=priority
        )
    
    def get_user_info(self) -> Dict[str, Any]:
        """
        èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºŽæµ‹è¯•APIè¿žæŽ¥ï¼‰
        
        Returns:
            ç”¨æˆ·ä¿¡æ¯æˆ–é”™è¯¯ä¿¡æ¯
        """
        if not self.is_enabled():
            return {"success": False, "error": "APIæœªå¯ç”¨"}
        
        try:
            with httpx.Client(timeout=30.0) as client:
                response = client.get(
                    f"{self.base_url}/user",
                    headers=self.headers
                )
                
                if response.status_code == 200:
                    user_data = response.json()
                    logger.info("æˆåŠŸèŽ·å–æ»´ç­”æ¸…å•ç”¨æˆ·ä¿¡æ¯")
                    return {
                        "success": True,
                        "username": user_data.get("username", ""),
                        "email": user_data.get("email", "")
                    }
                else:
                    logger.error(f"èŽ·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥: {response.status_code}")
                    return {
                        "success": False,
                        "error": f"HTTP {response.status_code}"
                    }
                    
        except Exception as e:
            logger.error(f"èŽ·å–ç”¨æˆ·ä¿¡æ¯æ—¶å‘ç”Ÿé”™è¯¯: {e}")
            return {"success": False, "error": str(e)}


# åˆ›å»ºå…¨å±€å®žä¾‹
dida_client = DidaIntegration()


def create_arxiv_task(report_type: str, 
                     summary: str, 
                     details: str = "",
                     paper_count: int = 0) -> Dict[str, Any]:
    """
    ä¾¿æ·å‡½æ•°ï¼šåˆ›å»ºArXivè®ºæ–‡ç›‘æŽ§ä»»åŠ¡
    
    Args:
        report_type: æŠ¥å‘Šç±»åž‹
        summary: æŠ¥å‘Šæ‘˜è¦  
        details: è¯¦ç»†å†…å®¹
        paper_count: è®ºæ–‡æ•°é‡
        
    Returns:
        ä»»åŠ¡åˆ›å»ºç»“æžœ
    """
    return dida_client.create_report_task(
        report_type=report_type,
        summary=summary,
        details=details,
        paper_count=paper_count
    )


def test_dida_connection() -> bool:
    """
    æµ‹è¯•æ»´ç­”æ¸…å•APIè¿žæŽ¥
    
    Returns:
        è¿žæŽ¥æ˜¯å¦æˆåŠŸ
    """
    result = dida_client.get_user_info()
    if result.get("success"):
        logger.info(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥æˆåŠŸï¼Œç”¨æˆ·ï¼š{result.get('username', 'æœªçŸ¥')}")
        return True
    else:
        logger.warning(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥å¤±è´¥ï¼š{result.get('error', 'æœªçŸ¥é”™è¯¯')}")
        return False


if __name__ == "__main__":
    # æµ‹è¯•è¿žæŽ¥
    print("ðŸ§ª æµ‹è¯•æ»´ç­”æ¸…å•APIè¿žæŽ¥...")
    if test_dida_connection():
        print("âœ… è¿žæŽ¥æˆåŠŸ!")
        
        # åˆ›å»ºæµ‹è¯•ä»»åŠ¡
        print("\nðŸ§ª åˆ›å»ºæµ‹è¯•ä»»åŠ¡...")
        result = create_arxiv_task(
            report_type="daily",
            summary="è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ï¼Œç”¨äºŽéªŒè¯æ»´ç­”æ¸…å•APIé›†æˆåŠŸèƒ½",
            paper_count=0
        )
        
        if result.get("success"):
            print(f"âœ… æµ‹è¯•ä»»åŠ¡åˆ›å»ºæˆåŠŸ! ä»»åŠ¡ID: {result.get('task_id')}")
        else:
            print(f"âŒ æµ‹è¯•ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result.get('error')}")
    else:
        print("âŒ è¿žæŽ¥å¤±è´¥!")
        print("ðŸ’¡ è¯·ç¡®ä¿å·²è®¾ç½® DIDA_ACCESS_TOKEN çŽ¯å¢ƒå˜é‡")
```

çŽ°åœ¨æ›´æ–°é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ æ»´ç­”æ¸…å•ç›¸å…³é…ç½®ï¼š

```python
"""
é…ç½®æ–‡ä»¶ - å­˜å‚¨ç³»ç»Ÿé…ç½®å‚æ•°
"""

# Google Sheets TSV å¯¼å‡ºé“¾æŽ¥
RESEARCHERS_TSV_URL = "https://docs.google.com/spreadsheets/d/1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic/export?format=tsv&id=1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic&gid=0"

# é»˜è®¤æœç´¢ä¸»é¢˜
DEFAULT_TOPICS = ["cs.AI", "cs.CR"]

# HTTPè¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
REQUEST_TIMEOUT = 30.0

# è®ºæ–‡æ˜¾ç¤ºé™åˆ¶
DISPLAY_LIMIT = 10

# æ—¥æœŸå›žé€€é»˜è®¤å¤©æ•°
DEFAULT_DAYS_BACK = 3

# æœç´¢ç»“æžœä¿å­˜ç›®å½•
REPORTS_DIR = "reports"

# æ»´ç­”æ¸…å•APIé…ç½®
DIDA_API_CONFIG = {
    # æ˜¯å¦å¯ç”¨æ»´ç­”æ¸…å•é›†æˆ
    "enabled": True,
    
    # APIåŸºç¡€URL
    "base_url": "https://api.dida365.com/api/v2",
    
    # é»˜è®¤é¡¹ç›®IDï¼ˆæ”¶é›†ç®±ï¼‰
    "default_project_id": "inbox",
    
    # ä»»åŠ¡æ ‡ç­¾å‰ç¼€
    "tag_prefix": "arxiv",
    
    # ä»»åŠ¡ä¼˜å…ˆçº§æ˜ å°„
    "priority_mapping": {
        "no_papers": 0,    # æ— è®ºæ–‡æ—¶ä¼˜å…ˆçº§
        "has_papers": 1,   # æœ‰è®ºæ–‡æ—¶ä¼˜å…ˆçº§
        "many_papers": 2   # è®ºæ–‡è¾ƒå¤šæ—¶ä¼˜å…ˆçº§ï¼ˆ>=10ç¯‡ï¼‰
    },
    
    # è®ºæ–‡æ•°é‡é˜ˆå€¼
    "many_papers_threshold": 10
}
```

çŽ°åœ¨ä¿®æ”¹ `daily_papers.py` è„šæœ¬ï¼Œåœ¨æ‰§è¡ŒåŽåˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼š

```python
def main():
    """ä¸»å‡½æ•°"""
    try:
        # Google Sheets TSV å¯¼å‡ºé“¾æŽ¥
        tsv_url = "https://docs.google.com/spreadsheets/d/1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic/export?format=tsv&id=1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic&gid=0"
        
        print("ðŸ” æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - èŽ·å–ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„è®ºæ–‡")
        print(f"æ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        print(f"URL: {tsv_url}\n")
        
        # èŽ·å–ç ”ç©¶è€…æ•°æ®
        researchers = fetch_researchers_from_tsv(tsv_url)
        
        # æ˜¾ç¤ºç ”ç©¶è€…åˆ—è¡¨
        display_researchers(researchers)
        
        if researchers:
            # èŽ·å–æ‰€æœ‰ç ”ç©¶è€…ä»Šå¤©å‘å¸ƒçš„è®ºæ–‡
            all_papers = get_today_papers_for_all_researchers(researchers)
            
            # æ˜¾ç¤ºè®ºæ–‡ç»“æžœ
            display_papers(all_papers)
            
            print(f"\nâœ… ç›‘æŽ§å®Œæˆ - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            return researchers, all_papers
        else:
            print("âš ï¸ æœªæ‰¾åˆ°ç ”ç©¶è€…æ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æº")
            return [], {}
    
    except Exception as e:
        print(f"âŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        import traceback
        traceback.print_exc()
        return [], {}

->

def main():
    """ä¸»å‡½æ•°"""
    try:
        # Google Sheets TSV å¯¼å‡ºé“¾æŽ¥
        tsv_url = "https://docs.google.com/spreadsheets/d/1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic/export?format=tsv&id=1itjnV2U-Eh0F1T0LIGuLjzIhgL9f_OD8tbkMUG-Onic&gid=0"
        
        print("ðŸ” æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - èŽ·å–ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„è®ºæ–‡")
        print(f"æ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
        print(f"URL: {tsv_url}\n")
        
        # èŽ·å–ç ”ç©¶è€…æ•°æ®
        researchers = fetch_researchers_from_tsv(tsv_url)
        
        # æ˜¾ç¤ºç ”ç©¶è€…åˆ—è¡¨
        display_researchers(researchers)
        
        if researchers:
            # èŽ·å–æ‰€æœ‰ç ”ç©¶è€…ä»Šå¤©å‘å¸ƒçš„è®ºæ–‡
            all_papers = get_today_papers_for_all_researchers(researchers)
            
            # æ˜¾ç¤ºè®ºæ–‡ç»“æžœ
            display_papers(all_papers)
            
            print(f"\nâœ… ç›‘æŽ§å®Œæˆ - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            
            # åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
            create_daily_dida_task(researchers, all_papers)
            
            return researchers, all_papers
        else:
            print("âš ï¸ æœªæ‰¾åˆ°ç ”ç©¶è€…æ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æº")
            # å³ä½¿æ²¡æœ‰æ•°æ®ä¹Ÿåˆ›å»ºä¸€ä¸ªè®°å½•ä»»åŠ¡
            create_daily_dida_task([], {})
            return [], {}
    
    except Exception as e:
        print(f"âŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        import traceback
        traceback.print_exc()
        # åˆ›å»ºé”™è¯¯è®°å½•ä»»åŠ¡
        create_daily_dida_task([], {}, error=str(e))
        return [], {}
```

```python
#!/usr/bin/env python3
"""
æ¯æ—¥è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„è®ºæ–‡
"""

import httpx
import csv
import io
from typing import List, Dict, Any
from datetime import datetime
import re
from urllib.parse import urlencode

->

#!/usr/bin/env python3
"""
æ¯æ—¥è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„è®ºæ–‡
"""

import httpx
import csv
import io
from typing import List, Dict, Any
from datetime import datetime
import re
from urllib.parse import urlencode

# å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆ
try:
    from dida_integration import create_arxiv_task
except ImportError:
    print("âš ï¸ æ— æ³•å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆæ¨¡å—ï¼Œç›¸å…³åŠŸèƒ½å°†è¢«ç¦ç”¨")
    def create_arxiv_task(*args, **kwargs):
        return {"success": False, "error": "æ¨¡å—æœªå¯¼å…¥"}
```

```python
        print()


def main():

->

        print()


def create_daily_dida_task(researchers: List[Dict[str, Any]], 
                          all_papers: Dict[str, List[Dict[str, Any]]],
                          error: str = None) -> None:
    """
    åˆ›å»ºæ¯æ—¥è®ºæ–‡ç›‘æŽ§çš„æ»´ç­”æ¸…å•ä»»åŠ¡
    
    Args:
        researchers: ç ”ç©¶è€…åˆ—è¡¨
        all_papers: è®ºæ–‡æ•°æ®
        error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰
    """
    print("\nðŸ“ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡...")
    
    try:
        # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
        total_papers = sum(len(papers) for papers in all_papers.values()) if all_papers else 0
        researcher_count = len(researchers)
        
        # æž„å»ºä»»åŠ¡æ‘˜è¦
        if error:
            summary = f"âŒ æ¯æ—¥è®ºæ–‡ç›‘æŽ§æ‰§è¡Œå¤±è´¥\né”™è¯¯ä¿¡æ¯: {error}"
            details = f"æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        elif total_papers == 0:
            summary = f"ðŸ“„ ä»Šæ—¥æ— æ–°è®ºæ–‡å‘çŽ°"
            details = f"ç›‘æŽ§äº† {researcher_count} ä½ç ”ç©¶è€…\næ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        else:
            summary = f"ðŸŽ‰ ä»Šæ—¥å‘çŽ° {total_papers} ç¯‡æ–°è®ºæ–‡ï¼"
            # æž„å»ºè¯¦ç»†ä¿¡æ¯
            details_lines = [f"ç›‘æŽ§äº† {researcher_count} ä½ç ”ç©¶è€…"]
            
            # æ·»åŠ å‘çŽ°è®ºæ–‡çš„ç ”ç©¶è€…è¯¦æƒ…
            if all_papers:
                details_lines.append("\nðŸ“Š è®ºæ–‡åˆ†å¸ƒ:")
                for author, papers in all_papers.items():
                    details_lines.append(f"â€¢ {author}: {len(papers)} ç¯‡")
                    # æ·»åŠ å‰3ç¯‡è®ºæ–‡æ ‡é¢˜
                    for i, paper in enumerate(papers[:3], 1):
                        title = paper.get('title', 'æœªçŸ¥æ ‡é¢˜')
                        if len(title) > 50:
                            title = title[:50] + "..."
                        details_lines.append(f"  {i}. {title}")
                    if len(papers) > 3:
                        details_lines.append(f"  ... è¿˜æœ‰ {len(papers)-3} ç¯‡")
            
            details_lines.append(f"\nâ° æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            details = "\n".join(details_lines)
        
        # åˆ›å»ºä»»åŠ¡
        result = create_arxiv_task(
            report_type="daily",
            summary=summary,
            details=details,
            paper_count=total_papers
        )
        
        if result.get("success"):
            print(f"âœ… æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ!")
            if result.get("task_id"):
                print(f"   ä»»åŠ¡ID: {result['task_id']}")
            if result.get("url"):
                print(f"   ä»»åŠ¡é“¾æŽ¥: {result['url']}")
        else:
            print(f"âŒ æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result.get('error', 'æœªçŸ¥é”™è¯¯')}")
            
    except Exception as e:
        print(f"âŒ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡æ—¶å‡ºé”™: {e}")


def main():
```

çŽ°åœ¨ä¿®æ”¹ `weekly_papers.py` è„šæœ¬ï¼Œæ·»åŠ æ»´ç­”æ¸…å•é›†æˆï¼š

```python
#!/usr/bin/env python3
"""
å‘¨æŠ¥è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç ”ç©¶è€…æœ€è¿‘ä¸€å‘¨å‘å¸ƒçš„è®ºæ–‡
"""

import httpx
import csv
import io
from typing import List, Dict, Any
from datetime import datetime, timedelta
import re
from urllib.parse import urlencode

->

#!/usr/bin/env python3
"""
å‘¨æŠ¥è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç ”ç©¶è€…æœ€è¿‘ä¸€å‘¨å‘å¸ƒçš„è®ºæ–‡
"""

import httpx
import csv
import io
from typing import List, Dict, Any
from datetime import datetime, timedelta
import re
from urllib.parse import urlencode

# å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆ
try:
    from dida_integration import create_arxiv_task
except ImportError:
    print("âš ï¸ æ— æ³•å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆæ¨¡å—ï¼Œç›¸å…³åŠŸèƒ½å°†è¢«ç¦ç”¨")
    def create_arxiv_task(*args, **kwargs):
        return {"success": False, "error": "æ¨¡å—æœªå¯¼å…¥"}
```

```python
        print()


def main():

->

        print()


def create_weekly_dida_task(researchers: List[Dict[str, Any]], 
                           all_papers: Dict[str, List[Dict[str, Any]]],
                           error: str = None) -> None:
    """
    åˆ›å»ºå‘¨æŠ¥è®ºæ–‡ç›‘æŽ§çš„æ»´ç­”æ¸…å•ä»»åŠ¡
    
    Args:
        researchers: ç ”ç©¶è€…åˆ—è¡¨
        all_papers: è®ºæ–‡æ•°æ®
        error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰
    """
    print("\nðŸ“ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡...")
    
    try:
        # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
        total_papers = sum(len(papers) for papers in all_papers.values()) if all_papers else 0
        researcher_count = len(researchers)
        
        # æž„å»ºä»»åŠ¡æ‘˜è¦
        if error:
            summary = f"âŒ å‘¨æŠ¥è®ºæ–‡ç›‘æŽ§æ‰§è¡Œå¤±è´¥\né”™è¯¯ä¿¡æ¯: {error}"
            details = f"æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        elif total_papers == 0:
            summary = f"ðŸ“š æœ¬å‘¨æ— æ–°è®ºæ–‡å‘çŽ°"
            details = f"ç›‘æŽ§äº† {researcher_count} ä½ç ”ç©¶è€…\nç›‘æŽ§å‘¨æœŸ: {(datetime.now() - timedelta(days=7)).strftime('%Y-%m-%d')} è‡³ {datetime.now().strftime('%Y-%m-%d')}\næ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        else:
            summary = f"ðŸŽ‰ æœ¬å‘¨å‘çŽ° {total_papers} ç¯‡æ–°è®ºæ–‡ï¼"
            # æž„å»ºè¯¦ç»†ä¿¡æ¯
            details_lines = [f"ç›‘æŽ§äº† {researcher_count} ä½ç ”ç©¶è€…"]
            details_lines.append(f"ç›‘æŽ§å‘¨æœŸ: {(datetime.now() - timedelta(days=7)).strftime('%Y-%m-%d')} è‡³ {datetime.now().strftime('%Y-%m-%d')}")
            
            # æ·»åŠ å‘çŽ°è®ºæ–‡çš„ç ”ç©¶è€…è¯¦æƒ…
            if all_papers:
                details_lines.append("\nðŸ“Š è®ºæ–‡åˆ†å¸ƒ:")
                for author, papers in all_papers.items():
                    details_lines.append(f"â€¢ {author}: {len(papers)} ç¯‡")
                    # æ·»åŠ å‰2ç¯‡è®ºæ–‡æ ‡é¢˜ï¼ˆå‘¨æŠ¥ç¯‡å¹…æ›´é•¿ï¼Œæ˜¾ç¤ºå°‘ä¸€äº›ï¼‰
                    for i, paper in enumerate(papers[:2], 1):
                        title = paper.get('title', 'æœªçŸ¥æ ‡é¢˜')
                        if len(title) > 50:
                            title = title[:50] + "..."
                        details_lines.append(f"  {i}. {title}")
                    if len(papers) > 2:
                        details_lines.append(f"  ... è¿˜æœ‰ {len(papers)-2} ç¯‡")
            
            details_lines.append(f"\nâ° æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            details = "\n".join(details_lines)
        
        # åˆ›å»ºä»»åŠ¡
        result = create_arxiv_task(
            report_type="weekly",
            summary=summary,
            details=details,
            paper_count=total_papers
        )
        
        if result.get("success"):
            print(f"âœ… æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ!")
            if result.get("task_id"):
                print(f"   ä»»åŠ¡ID: {result['task_id']}")
            if result.get("url"):
                print(f"   ä»»åŠ¡é“¾æŽ¥: {result['url']}")
        else:
            print(f"âŒ æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result.get('error', 'æœªçŸ¥é”™è¯¯')}")
            
    except Exception as e:
        print(f"âŒ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡æ—¶å‡ºé”™: {e}")


def main():
```

```python
            # æ˜¾ç¤ºè®ºæ–‡ç»“æžœ
            display_papers(all_papers, "æœ€è¿‘ä¸€å‘¨")
            
            print(f"\nâœ… å‘¨æŠ¥ç›‘æŽ§å®Œæˆ - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            return researchers, all_papers
        else:
            print("âš ï¸ æœªæ‰¾åˆ°ç ”ç©¶è€…æ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æº")
            return [], {}
    
    except Exception as e:
        print(f"âŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        import traceback
        traceback.print_exc()
        return [], {}

->

            # æ˜¾ç¤ºè®ºæ–‡ç»“æžœ
            display_papers(all_papers, "æœ€è¿‘ä¸€å‘¨")
            
            print(f"\nâœ… å‘¨æŠ¥ç›‘æŽ§å®Œæˆ - {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            
            # åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
            create_weekly_dida_task(researchers, all_papers)
            
            return researchers, all_papers
        else:
            print("âš ï¸ æœªæ‰¾åˆ°ç ”ç©¶è€…æ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æº")
            # å³ä½¿æ²¡æœ‰æ•°æ®ä¹Ÿåˆ›å»ºä¸€ä¸ªè®°å½•ä»»åŠ¡
            create_weekly_dida_task([], {})
            return [], {}
    
    except Exception as e:
        print(f"âŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        import traceback
        traceback.print_exc()
        # åˆ›å»ºé”™è¯¯è®°å½•ä»»åŠ¡
        create_weekly_dida_task([], {}, error=str(e))
        return [], {}
```

çŽ°åœ¨ä¿®æ”¹ `topic_papers.py` è„šæœ¬ï¼Œæ·»åŠ æ»´ç­”æ¸…å•é›†æˆï¼š

```python
#!/usr/bin/env python3
"""
åŸºäºŽä¸»é¢˜çš„è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç‰¹å®šä¸»é¢˜é¢†åŸŸçš„æœ€æ–°è®ºæ–‡
æ”¯æŒæ™ºèƒ½æ—¥æœŸå›žé€€å’Œå¤šç§æœç´¢æ¨¡å¼
"""

import httpx
import os
from typing import List, Dict, Any, Optional
from datetime import datetime, timedelta
import re
from urllib.parse import urlencode
import json

->

#!/usr/bin/env python3
"""
åŸºäºŽä¸»é¢˜çš„è®ºæ–‡ç›‘æŽ§è„šæœ¬ - æœç´¢ç‰¹å®šä¸»é¢˜é¢†åŸŸçš„æœ€æ–°è®ºæ–‡
æ”¯æŒæ™ºèƒ½æ—¥æœŸå›žé€€å’Œå¤šç§æœç´¢æ¨¡å¼
"""

import httpx
import os
from typing import List, Dict, Any, Optional
from datetime import datetime, timedelta
import re
from urllib.parse import urlencode
import json

# å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆ
try:
    from dida_integration import create_arxiv_task
except ImportError:
    print("âš ï¸ æ— æ³•å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆæ¨¡å—ï¼Œç›¸å…³åŠŸèƒ½å°†è¢«ç¦ç”¨")
    def create_arxiv_task(*args, **kwargs):
        return {"success": False, "error": "æ¨¡å—æœªå¯¼å…¥"}
```

```python
    return fetch_papers_by_topic(topics, date_from, date_to)


def main():

->

    return fetch_papers_by_topic(topics, date_from, date_to)


def create_topic_dida_task(topics: List[str], 
                          results: Dict[str, Any],
                          error: str = None) -> None:
    """
    åˆ›å»ºä¸»é¢˜è®ºæ–‡æœç´¢çš„æ»´ç­”æ¸…å•ä»»åŠ¡
    
    Args:
        topics: æœç´¢ä¸»é¢˜åˆ—è¡¨
        results: æœç´¢ç»“æžœå­—å…¸
        error: é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰
    """
    print("\nðŸ“ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡...")
    
    try:
        # è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
        papers = results.get('papers', []) if results else []
        paper_count = len(papers)
        
        # æž„å»ºä»»åŠ¡æ‘˜è¦
        topics_str = ' AND '.join(topics)
        if error:
            summary = f"âŒ ä¸»é¢˜è®ºæ–‡æœç´¢æ‰§è¡Œå¤±è´¥\nä¸»é¢˜: {topics_str}\né”™è¯¯ä¿¡æ¯: {error}"
            details = f"æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        elif paper_count == 0:
            summary = f"ðŸŽ¯ ä¸»é¢˜è®ºæ–‡æœç´¢æœªå‘çŽ°æ–°è®ºæ–‡\nä¸»é¢˜: {topics_str}"
            details = f"æœç´¢ä¸»é¢˜: {topics_str}\n"
            if results:
                strategy_info = []
                for strategy in results.get('attempted_strategies', []):
                    if 'error' in strategy:
                        strategy_info.append(f"âŒ {strategy['name']}: {strategy['error']}")
                    else:
                        strategy_info.append(f"â€¢ {strategy['name']}: {strategy['papers_found']} ç¯‡")
                details += f"å°è¯•ç­–ç•¥:\n" + "\n".join(strategy_info)
            details += f"\n\nâ° æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}"
        else:
            summary = f"ðŸŽ‰ ä¸»é¢˜è®ºæ–‡æœç´¢å‘çŽ° {paper_count} ç¯‡è®ºæ–‡ï¼\nä¸»é¢˜: {topics_str}"
            # æž„å»ºè¯¦ç»†ä¿¡æ¯
            details_lines = [f"æœç´¢ä¸»é¢˜: {topics_str}"]
            
            if results:
                details_lines.append(f"ä½¿ç”¨ç­–ç•¥: {results.get('search_strategy_used', 'æœªçŸ¥')}")
                details_lines.append(f"æ€»å¯ç”¨è®ºæ–‡: {results.get('total_results', paper_count)} ç¯‡")
                
                # æ·»åŠ å‰3ç¯‡è®ºæ–‡æ ‡é¢˜
                if papers:
                    details_lines.append("\nðŸ“Š å‘çŽ°è®ºæ–‡:")
                    for i, paper in enumerate(papers[:3], 1):
                        title = paper.get('title', 'æœªçŸ¥æ ‡é¢˜')
                        if len(title) > 60:
                            title = title[:60] + "..."
                        arxiv_id = paper.get('arxiv_id', '')
                        details_lines.append(f"{i}. {title} (arXiv:{arxiv_id})")
                    
                    if len(papers) > 3:
                        details_lines.append(f"... è¿˜æœ‰ {len(papers)-3} ç¯‡")
            
            details_lines.append(f"\nâ° æ‰§è¡Œæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}")
            details = "\n".join(details_lines)
        
        # åˆ›å»ºä»»åŠ¡
        result = create_arxiv_task(
            report_type="topic",
            summary=summary,
            details=details,
            paper_count=paper_count
        )
        
        if result.get("success"):
            print(f"âœ… æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ!")
            if result.get("task_id"):
                print(f"   ä»»åŠ¡ID: {result['task_id']}")
            if result.get("url"):
                print(f"   ä»»åŠ¡é“¾æŽ¥: {result['url']}")
        else:
            print(f"âŒ æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result.get('error', 'æœªçŸ¥é”™è¯¯')}")
            
    except Exception as e:
        print(f"âŒ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡æ—¶å‡ºé”™: {e}")


def main():
```

```python
        results = results2 if results2['papers'] else results1
    
    # ä¿å­˜æœ€æ–°çš„ç»“æžœåˆ°æ–‡ä»¶
    output_file = f"reports/topic_papers_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    try:
        os.makedirs("reports", exist_ok=True)
        
        with open(output_file, 'w', encoding='utf-8') as f:
            json.dump(results, f, ensure_ascii=False, indent=2)
        print(f"\nðŸ’¾ ç»“æžœå·²ä¿å­˜åˆ°: {output_file}")
        
        # CIçŽ¯å¢ƒä¸­æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
        if is_ci:
            papers_count = len(results.get('papers', []))
            strategy_used = results.get('search_strategy_used', 'N/A')
            print(f"ðŸ“Š æœ¬æ¬¡æœç´¢æ€»ç»“:")
            print(f"   ðŸŽ¯ ç­–ç•¥: {strategy_used}")
            print(f"   ðŸ“„ è®ºæ–‡æ•°é‡: {papers_count}")
            print(f"   ðŸ·ï¸  ä¸»é¢˜: {' AND '.join(topics)}")
            
    except Exception as e:
        print(f"\nâŒ ä¿å­˜ç»“æžœå¤±è´¥: {e}")

->

        results = results2 if results2['papers'] else results1
    
    # åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
    create_topic_dida_task(topics, results)
    
    # ä¿å­˜æœ€æ–°çš„ç»“æžœåˆ°æ–‡ä»¶
    output_file = f"reports/topic_papers_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    try:
        os.makedirs("reports", exist_ok=True)
        
        with open(output_file, 'w', encoding='utf-8') as f:
            json.dump(results, f, ensure_ascii=False, indent=2)
        print(f"\nðŸ’¾ ç»“æžœå·²ä¿å­˜åˆ°: {output_file}")
        
        # CIçŽ¯å¢ƒä¸­æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
        if is_ci:
            papers_count = len(results.get('papers', []))
            strategy_used = results.get('search_strategy_used', 'N/A')
            print(f"ðŸ“Š æœ¬æ¬¡æœç´¢æ€»ç»“:")
            print(f"   ðŸŽ¯ ç­–ç•¥: {strategy_used}")
            print(f"   ðŸ“„ è®ºæ–‡æ•°é‡: {papers_count}")
            print(f"   ðŸ·ï¸  ä¸»é¢˜: {' AND '.join(topics)}")
            
    except Exception as e:
        print(f"\nâŒ ä¿å­˜ç»“æžœå¤±è´¥: {e}")
        # å³ä½¿ä¿å­˜å¤±è´¥ä¹Ÿè¦å°è¯•åˆ›å»ºä»»åŠ¡ï¼ˆå¦‚æžœè¿˜æ²¡åˆ›å»ºï¼‰
        create_topic_dida_task(topics, results, error=f"ä¿å­˜å¤±è´¥: {e}")
```

```python
def main():
    """ä¸»å‡½æ•°"""
    print("ðŸ” åŸºäºŽä¸»é¢˜çš„è®ºæ–‡æœç´¢ç³»ç»Ÿ")
    print("="*50)
    
    # é»˜è®¤æœç´¢ AI + å®‰å…¨/å¯†ç å­¦ äº¤å‰é¢†åŸŸ
    topics = ["cs.AI", "cs.CR"]
    
    # å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–è€…ç›´æŽ¥ä¿®æ”¹æ¥è‡ªå®šä¹‰
    import sys
    if len(sys.argv) > 1:
        # æ”¯æŒå‘½ä»¤è¡Œè¾“å…¥ä¸»é¢˜
        topics = sys.argv[1].split(',')
        topics = [topic.strip() for topic in topics]  # æ¸…ç†ç©ºæ ¼
    
    print(f"ðŸ“š æœç´¢ä¸»é¢˜: {' AND '.join(topics)}")
    
    # æ£€æµ‹æ˜¯å¦åœ¨CIçŽ¯å¢ƒä¸­è¿è¡Œ
    is_ci = os.getenv('GITHUB_ACTIONS') == 'true'
    
    if is_ci:
        # CIçŽ¯å¢ƒï¼šè¿è¡Œå•ä¸€çš„æ™ºèƒ½æœç´¢ï¼Œå‡å°‘è¾“å‡º
        print("\nðŸ” CIæ¨¡å¼: æ™ºèƒ½æœç´¢æœ€æ–°è®ºæ–‡")
        results = get_topic_papers_with_smart_dates(topics, days_back=3)
        display_search_results(results, limit=10)
    else:
        # æœ¬åœ°çŽ¯å¢ƒï¼šè¿è¡Œå®Œæ•´çš„æµ‹è¯•æ¨¡å¼
        print("\nðŸ” æµ‹è¯•1: æ™ºèƒ½æœç´¢æœ€è¿‘3å¤©çš„è®ºæ–‡")
        results1 = get_topic_papers_with_smart_dates(topics, days_back=3)
        display_search_results(results1, limit=5)
        
        print("\n\nðŸ” æµ‹è¯•2: ä¸é™æ—¥æœŸæœç´¢ï¼ˆèŽ·å–æœ€æ–°50ç¯‡ï¼‰")
        results2 = fetch_papers_by_topic(topics, date_from=None, date_to=None)
        display_search_results(results2, limit=10)
        
        results = results2 if results2['papers'] else results1
    
    # åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
    create_topic_dida_task(topics, results)
    
    # ä¿å­˜æœ€æ–°çš„ç»“æžœåˆ°æ–‡ä»¶
    output_file = f"reports/topic_papers_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
    try:
        os.makedirs("reports", exist_ok=True)
        
        with open(output_file, 'w', encoding='utf-8') as f:
            json.dump(results, f, ensure_ascii=False, indent=2)
        print(f"\nðŸ’¾ ç»“æžœå·²ä¿å­˜åˆ°: {output_file}")
        
        # CIçŽ¯å¢ƒä¸­æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
        if is_ci:
            papers_count = len(results.get('papers', []))
            strategy_used = results.get('search_strategy_used', 'N/A')
            print(f"ðŸ“Š æœ¬æ¬¡æœç´¢æ€»ç»“:")
            print(f"   ðŸŽ¯ ç­–ç•¥: {strategy_used}")
            print(f"   ðŸ“„ è®ºæ–‡æ•°é‡: {papers_count}")
            print(f"   ðŸ·ï¸  ä¸»é¢˜: {' AND '.join(topics)}")
            
    except Exception as e:
        print(f"\nâŒ ä¿å­˜ç»“æžœå¤±è´¥: {e}")
        # å³ä½¿ä¿å­˜å¤±è´¥ä¹Ÿè¦å°è¯•åˆ›å»ºä»»åŠ¡ï¼ˆå¦‚æžœè¿˜æ²¡åˆ›å»ºï¼‰
        create_topic_dida_task(topics, results, error=f"ä¿å­˜å¤±è´¥: {e}")

->

def main():
    """ä¸»å‡½æ•°"""
    # é»˜è®¤æœç´¢ AI + å®‰å…¨/å¯†ç å­¦ äº¤å‰é¢†åŸŸ
    topics = ["cs.AI", "cs.CR"]
    results = None
    
    try:
        print("ðŸ” åŸºäºŽä¸»é¢˜çš„è®ºæ–‡æœç´¢ç³»ç»Ÿ")
        print("="*50)
        
        # å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æˆ–è€…ç›´æŽ¥ä¿®æ”¹æ¥è‡ªå®šä¹‰
        import sys
        if len(sys.argv) > 1:
            # æ”¯æŒå‘½ä»¤è¡Œè¾“å…¥ä¸»é¢˜
            topics = sys.argv[1].split(',')
            topics = [topic.strip() for topic in topics]  # æ¸…ç†ç©ºæ ¼
        
        print(f"ðŸ“š æœç´¢ä¸»é¢˜: {' AND '.join(topics)}")
        
        # æ£€æµ‹æ˜¯å¦åœ¨CIçŽ¯å¢ƒä¸­è¿è¡Œ
        is_ci = os.getenv('GITHUB_ACTIONS') == 'true'
        
        if is_ci:
            # CIçŽ¯å¢ƒï¼šè¿è¡Œå•ä¸€çš„æ™ºèƒ½æœç´¢ï¼Œå‡å°‘è¾“å‡º
            print("\nðŸ” CIæ¨¡å¼: æ™ºèƒ½æœç´¢æœ€æ–°è®ºæ–‡")
            results = get_topic_papers_with_smart_dates(topics, days_back=3)
            display_search_results(results, limit=10)
        else:
            # æœ¬åœ°çŽ¯å¢ƒï¼šè¿è¡Œå®Œæ•´çš„æµ‹è¯•æ¨¡å¼
            print("\nðŸ” æµ‹è¯•1: æ™ºèƒ½æœç´¢æœ€è¿‘3å¤©çš„è®ºæ–‡")
            results1 = get_topic_papers_with_smart_dates(topics, days_back=3)
            display_search_results(results1, limit=5)
            
            print("\n\nðŸ” æµ‹è¯•2: ä¸é™æ—¥æœŸæœç´¢ï¼ˆèŽ·å–æœ€æ–°50ç¯‡ï¼‰")
            results2 = fetch_papers_by_topic(topics, date_from=None, date_to=None)
            display_search_results(results2, limit=10)
            
            results = results2 if results2['papers'] else results1
        
        # åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡
        create_topic_dida_task(topics, results)
        
        # ä¿å­˜æœ€æ–°çš„ç»“æžœåˆ°æ–‡ä»¶
        output_file = f"reports/topic_papers_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
        try:
            os.makedirs("reports", exist_ok=True)
            
            with open(output_file, 'w', encoding='utf-8') as f:
                json.dump(results, f, ensure_ascii=False, indent=2)
            print(f"\nðŸ’¾ ç»“æžœå·²ä¿å­˜åˆ°: {output_file}")
            
            # CIçŽ¯å¢ƒä¸­æ˜¾ç¤ºæ€»ç»“ä¿¡æ¯
            if os.getenv('GITHUB_ACTIONS') == 'true':
                papers_count = len(results.get('papers', []))
                strategy_used = results.get('search_strategy_used', 'N/A')
                print(f"ðŸ“Š æœ¬æ¬¡æœç´¢æ€»ç»“:")
                print(f"   ðŸŽ¯ ç­–ç•¥: {strategy_used}")
                print(f"   ðŸ“„ è®ºæ–‡æ•°é‡: {papers_count}")
                print(f"   ðŸ·ï¸  ä¸»é¢˜: {' AND '.join(topics)}")
                
        except Exception as e:
            print(f"\nâŒ ä¿å­˜ç»“æžœå¤±è´¥: {e}")
            
    except Exception as e:
        print(f"âŒ ç¨‹åºæ‰§è¡Œå‡ºé”™: {e}")
        import traceback
        traceback.print_exc()
        # åˆ›å»ºé”™è¯¯è®°å½•ä»»åŠ¡
        create_topic_dida_task(topics, results, error=str(e))
```

çŽ°åœ¨åˆ›å»ºæµ‹è¯•è„šæœ¬éªŒè¯æ»´ç­”æ¸…å•APIé›†æˆï¼š

```python
#!/usr/bin/env python3
"""
æ»´ç­”æ¸…å•APIé›†æˆæµ‹è¯•è„šæœ¬
ç”¨äºŽæµ‹è¯•æ»´ç­”æ¸…å•APIè¿žæŽ¥å’Œä»»åŠ¡åˆ›å»ºåŠŸèƒ½
"""

import os
import sys
from datetime import datetime

# ç¡®ä¿èƒ½å¤Ÿå¯¼å…¥é¡¹ç›®æ¨¡å—
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

try:
    from dida_integration import (
        DidaIntegration, 
        create_arxiv_task, 
        test_dida_connection
    )
except ImportError as e:
    print(f"âŒ å¯¼å…¥æ»´ç­”æ¸…å•é›†æˆæ¨¡å—å¤±è´¥: {e}")
    sys.exit(1)


def test_basic_connection():
    """æµ‹è¯•åŸºæœ¬APIè¿žæŽ¥"""
    print("ðŸ§ª æµ‹è¯•1: åŸºæœ¬APIè¿žæŽ¥æµ‹è¯•")
    print("-" * 40)
    
    success = test_dida_connection()
    
    if success:
        print("âœ… APIè¿žæŽ¥æµ‹è¯•æˆåŠŸ")
        return True
    else:
        print("âŒ APIè¿žæŽ¥æµ‹è¯•å¤±è´¥")
        return False


def test_simple_task_creation():
    """æµ‹è¯•ç®€å•ä»»åŠ¡åˆ›å»º"""
    print("\nðŸ§ª æµ‹è¯•2: ç®€å•ä»»åŠ¡åˆ›å»ºæµ‹è¯•")
    print("-" * 40)
    
    dida = DidaIntegration()
    
    if not dida.is_enabled():
        print("âŒ æ»´ç­”æ¸…å•APIæœªå¯ç”¨ï¼Œè¯·è®¾ç½®DIDA_ACCESS_TOKENçŽ¯å¢ƒå˜é‡")
        return False
    
    # åˆ›å»ºæµ‹è¯•ä»»åŠ¡
    result = dida.create_task(
        title="ðŸ§ª ArXiv Follow æµ‹è¯•ä»»åŠ¡",
        content=f"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ï¼Œç”¨äºŽéªŒè¯æ»´ç­”æ¸…å•APIé›†æˆåŠŸèƒ½ã€‚\n\nåˆ›å»ºæ—¶é—´: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}",
        tags=["æµ‹è¯•", "arxiv", "api"]
    )
    
    if result.get("success"):
        print("âœ… ç®€å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ")
        print(f"   ä»»åŠ¡ID: {result.get('task_id')}")
        print(f"   ä»»åŠ¡é“¾æŽ¥: {result.get('url')}")
        return True
    else:
        print(f"âŒ ç®€å•ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result.get('error')}")
        return False


def test_arxiv_task_creation():
    """æµ‹è¯•ArXivè®ºæ–‡ç›‘æŽ§ä»»åŠ¡åˆ›å»º"""
    print("\nðŸ§ª æµ‹è¯•3: ArXivè®ºæ–‡ç›‘æŽ§ä»»åŠ¡åˆ›å»ºæµ‹è¯•")
    print("-" * 40)
    
    # æµ‹è¯•æ¯æ—¥ç›‘æŽ§ä»»åŠ¡
    print("ðŸ“„ æµ‹è¯•æ¯æ—¥ç›‘æŽ§ä»»åŠ¡...")
    result1 = create_arxiv_task(
        report_type="daily",
        summary="ä»Šæ—¥å‘çŽ°3ç¯‡æ–°è®ºæ–‡ï¼",
        details="ç›‘æŽ§äº†5ä½ç ”ç©¶è€…\nè®ºæ–‡åˆ†å¸ƒ:\nâ€¢ å¼ ä¸‰: 2ç¯‡\nâ€¢ æŽå››: 1ç¯‡",
        paper_count=3
    )
    
    if result1.get("success"):
        print("âœ… æ¯æ—¥ç›‘æŽ§ä»»åŠ¡åˆ›å»ºæˆåŠŸ")
    else:
        print(f"âŒ æ¯æ—¥ç›‘æŽ§ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result1.get('error')}")
    
    # æµ‹è¯•å‘¨æŠ¥ä»»åŠ¡
    print("\nðŸ“š æµ‹è¯•å‘¨æŠ¥ä»»åŠ¡...")
    result2 = create_arxiv_task(
        report_type="weekly", 
        summary="æœ¬å‘¨æ— æ–°è®ºæ–‡å‘çŽ°",
        details="ç›‘æŽ§äº†5ä½ç ”ç©¶è€…\nç›‘æŽ§å‘¨æœŸ: 2025-01-01 è‡³ 2025-01-07",
        paper_count=0
    )
    
    if result2.get("success"):
        print("âœ… å‘¨æŠ¥ä»»åŠ¡åˆ›å»ºæˆåŠŸ")
    else:
        print(f"âŒ å‘¨æŠ¥ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result2.get('error')}")
    
    # æµ‹è¯•ä¸»é¢˜æœç´¢ä»»åŠ¡
    print("\nðŸŽ¯ æµ‹è¯•ä¸»é¢˜æœç´¢ä»»åŠ¡...")
    result3 = create_arxiv_task(
        report_type="topic",
        summary="ä¸»é¢˜è®ºæ–‡æœç´¢å‘çŽ°10ç¯‡è®ºæ–‡ï¼\nä¸»é¢˜: cs.AI AND cs.CR",
        details="æœç´¢ä¸»é¢˜: cs.AI AND cs.CR\nä½¿ç”¨ç­–ç•¥: æ™ºèƒ½æ—¥æœŸå›žé€€\nå‘çŽ°è®ºæ–‡:\n1. GPT-4 åœ¨ç½‘ç»œå®‰å…¨ä¸­çš„åº”ç”¨\n2. åŸºäºŽæ·±åº¦å­¦ä¹ çš„æ¶æ„è½¯ä»¶æ£€æµ‹",
        paper_count=10
    )
    
    if result3.get("success"):
        print("âœ… ä¸»é¢˜æœç´¢ä»»åŠ¡åˆ›å»ºæˆåŠŸ")
    else:
        print(f"âŒ ä¸»é¢˜æœç´¢ä»»åŠ¡åˆ›å»ºå¤±è´¥: {result3.get('error')}")
    
    # ç»Ÿè®¡æˆåŠŸæ•°é‡
    success_count = sum([
        result1.get("success", False),
        result2.get("success", False), 
        result3.get("success", False)
    ])
    
    print(f"\nðŸ“Š ArXivä»»åŠ¡åˆ›å»ºæµ‹è¯•ç»“æžœ: {success_count}/3 æˆåŠŸ")
    return success_count == 3


def test_error_handling():
    """æµ‹è¯•é”™è¯¯å¤„ç†"""
    print("\nðŸ§ª æµ‹è¯•4: é”™è¯¯å¤„ç†æµ‹è¯•")
    print("-" * 40)
    
    # åˆ›å»ºä¸€ä¸ªä½¿ç”¨æ— æ•ˆtokençš„å®¢æˆ·ç«¯
    invalid_dida = DidaIntegration(access_token="invalid_token_12345")
    
    result = invalid_dida.create_task(
        title="åº”è¯¥å¤±è´¥çš„ä»»åŠ¡",
        content="è¿™ä¸ªä»»åŠ¡åº”è¯¥å› ä¸ºæ— æ•ˆtokenè€Œå¤±è´¥"
    )
    
    if not result.get("success"):
        print("âœ… é”™è¯¯å¤„ç†æµ‹è¯•æˆåŠŸ - æ— æ•ˆtokenæ­£ç¡®è¿”å›žå¤±è´¥")
        return True
    else:
        print("âŒ é”™è¯¯å¤„ç†æµ‹è¯•å¤±è´¥ - æ— æ•ˆtokenåº”è¯¥è¿”å›žå¤±è´¥")
        return False


def main():
    """ä¸»æµ‹è¯•å‡½æ•°"""
    print("ðŸ§ª æ»´ç­”æ¸…å•APIé›†æˆæµ‹è¯•å¥—ä»¶")
    print("=" * 60)
    
    # æ£€æŸ¥çŽ¯å¢ƒå˜é‡
    access_token = os.getenv('DIDA_ACCESS_TOKEN')
    if not access_token:
        print("âš ï¸  è­¦å‘Š: æœªè®¾ç½® DIDA_ACCESS_TOKEN çŽ¯å¢ƒå˜é‡")
        print("   éƒ¨åˆ†æµ‹è¯•å°†è¢«è·³è¿‡æˆ–å¤±è´¥")
        print("   è¯·å‚è€ƒREADME.mdèŽ·å–access tokené…ç½®æ–¹æ³•")
    else:
        print(f"âœ… æ£€æµ‹åˆ°access token (é•¿åº¦: {len(access_token)})")
    
    print()
    
    # è¿è¡Œæµ‹è¯•
    test_results = []
    
    # æµ‹è¯•1: åŸºæœ¬è¿žæŽ¥
    test_results.append(test_basic_connection())
    
    # æµ‹è¯•2: ç®€å•ä»»åŠ¡åˆ›å»ºï¼ˆéœ€è¦æœ‰æ•ˆtokenï¼‰
    if access_token:
        test_results.append(test_simple_task_creation())
        test_results.append(test_arxiv_task_creation())
    else:
        print("\nâ­ï¸  è·³è¿‡ä»»åŠ¡åˆ›å»ºæµ‹è¯•ï¼ˆéœ€è¦access tokenï¼‰")
        test_results.extend([False, False])
    
    # æµ‹è¯•4: é”™è¯¯å¤„ç†
    test_results.append(test_error_handling())
    
    # æµ‹è¯•ç»“æžœæ±‡æ€»
    print("\n" + "=" * 60)
    print("ðŸ“Š æµ‹è¯•ç»“æžœæ±‡æ€»")
    print("=" * 60)
    
    test_names = [
        "åŸºæœ¬APIè¿žæŽ¥æµ‹è¯•",
        "ç®€å•ä»»åŠ¡åˆ›å»ºæµ‹è¯•", 
        "ArXivä»»åŠ¡åˆ›å»ºæµ‹è¯•",
        "é”™è¯¯å¤„ç†æµ‹è¯•"
    ]
    
    passed = 0
    for i, (name, result) in enumerate(zip(test_names, test_results), 1):
        status = "âœ… é€šè¿‡" if result else "âŒ å¤±è´¥"
        print(f"{i}. {name}: {status}")
        if result:
            passed += 1
    
    print(f"\nðŸŽ¯ æ€»ä½“ç»“æžœ: {passed}/{len(test_results)} ä¸ªæµ‹è¯•é€šè¿‡")
    
    if passed == len(test_results):
        print("ðŸŽ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼æ»´ç­”æ¸…å•APIé›†æˆæ­£å¸¸å·¥ä½œ")
        return 0
    elif passed > len(test_results) // 2:
        print("âš ï¸  éƒ¨åˆ†æµ‹è¯•é€šè¿‡ï¼Œè¯·æ£€æŸ¥å¤±è´¥çš„æµ‹è¯•é¡¹")
        return 1
    else:
        print("âŒ å¤§éƒ¨åˆ†æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®å’Œç½‘ç»œè¿žæŽ¥")
        return 2


if __name__ == "__main__":
    exit_code = main()
    sys.exit(exit_code)
```

çŽ°åœ¨åˆ›å»ºæ»´ç­”æ¸…å•é›†æˆé…ç½®æŒ‡å—ï¼š

```markdown
# æ»´ç­”æ¸…å•APIé›†æˆé…ç½®æŒ‡å—

## ðŸŽ¯ åŠŸèƒ½æ¦‚è¿°

ArXiv Follow ç³»ç»Ÿå·²é›†æˆæ»´ç­”æ¸…å•APIï¼Œå¯ä»¥åœ¨æ¯æ¬¡æ‰§è¡Œè®ºæ–‡ç›‘æŽ§ä»»åŠ¡åŽè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼Œæ–¹ä¾¿ä½ è·Ÿè¸ªå’Œç®¡ç†è®ºæ–‡ç›‘æŽ§ç»“æžœã€‚

### æ”¯æŒçš„åŠŸèƒ½
- âœ… **æ¯æ—¥è®ºæ–‡ç›‘æŽ§** - åˆ›å»ºæ¯æ—¥å‘çŽ°è®ºæ–‡çš„æ±‡æ€»ä»»åŠ¡
- âœ… **å‘¨æŠ¥è®ºæ–‡æ±‡æ€»** - åˆ›å»ºæ¯å‘¨è®ºæ–‡ç›‘æŽ§æŠ¥å‘Šä»»åŠ¡
- âœ… **ä¸»é¢˜è®ºæ–‡æœç´¢** - åˆ›å»ºåŸºäºŽä¸»é¢˜æœç´¢çš„è®ºæ–‡å‘çŽ°ä»»åŠ¡
- âœ… **é”™è¯¯ç›‘æŽ§** - å½“ç›‘æŽ§è„šæœ¬å‡ºé”™æ—¶åˆ›å»ºé”™è¯¯è®°å½•ä»»åŠ¡
- âœ… **æ™ºèƒ½ä¼˜å…ˆçº§** - æ ¹æ®å‘çŽ°è®ºæ–‡æ•°é‡è‡ªåŠ¨è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§

## ðŸ”‘ èŽ·å–æ»´ç­”æ¸…å• Access Token

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆæŽ¨èï¼‰

æ ¹æ®ç”¨æˆ·åˆ†äº«ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹å¼€å‘çš„èŽ·å–å·¥å…·ï¼š

1. **è®¿é—®èŽ·å–å·¥å…·**ï¼š
   - åœ¨çº¿å·¥å…·ï¼šhttps://dida-auth.vercel.app/
   - GitHubé¡¹ç›®ï¼šhttps://github.com/Stream-L/dida-auth

2. **æ“ä½œæ­¥éª¤**ï¼š
   - åœ¨ [æ»´ç­”æ¸…å•å¼€å‘è€…ç®¡ç†é¡µé¢](https://developer.dida365.com/manage) åˆ›å»ºæ–°åº”ç”¨
   - èŽ·å– Client ID å’Œ Client Secret
   - åœ¨å·¥å…·é¡µé¢è¾“å…¥Client IDå’ŒClient Secret
   - å¤åˆ¶ç”Ÿæˆçš„ Redirect URI åˆ°æ»´ç­”æ¸…å•åº”ç”¨è®¾ç½®ä¸­
   - ç‚¹å‡»"Get Authorization Code"è¿›è¡ŒæŽˆæƒ
   - ç‚¹å‡»"Get Access Token"èŽ·å–è®¿é—®ä»¤ç‰Œ

### æ–¹æ³•äºŒï¼šæŸ¥çœ‹æ»´ç­”æ¸…å•å®˜æ–¹APIæ–‡æ¡£

è®¿é—® [æ»´ç­”æ¸…å•å¼€å‘è€…APIæ–‡æ¡£](https://developer.dida365.com/api) äº†è§£OAuth2è®¤è¯æµç¨‹ã€‚

## âš™ï¸ é…ç½® Access Token

### æœ¬åœ°å¼€å‘çŽ¯å¢ƒ

1. **è®¾ç½®çŽ¯å¢ƒå˜é‡**ï¼š
```bash
# Windows (CMD)
set DIDA_ACCESS_TOKEN=your_access_token_here

# Windows (PowerShell)
$env:DIDA_ACCESS_TOKEN="your_access_token_here"

# macOS/Linux
export DIDA_ACCESS_TOKEN="your_access_token_here"
```

2. **æµ‹è¯•è¿žæŽ¥**ï¼š
```bash
# æµ‹è¯•æ»´ç­”æ¸…å•APIé›†æˆ
uv run python test_dida_integration.py

# ç›´æŽ¥æµ‹è¯•è¿žæŽ¥
uv run python dida_integration.py
```

### GitHub Actions (CI/CD)

1. **æ·»åŠ  GitHub Secret**ï¼š
   - è¿›å…¥ä½ çš„GitHubä»“åº“
   - ç‚¹å‡» `Settings` â†’ `Secrets and variables` â†’ `Actions`
   - ç‚¹å‡» `New repository secret`
   - Name: `DIDA_ACCESS_TOKEN`
   - Secret: ä½ çš„æ»´ç­”æ¸…å•access token
   - ç‚¹å‡» `Add secret`

2. **GitHub Actionsä¸­çš„é…ç½®**ï¼š
GitHub Actionså·¥ä½œæµå·²è‡ªåŠ¨é…ç½®å¥½çŽ¯å¢ƒå˜é‡ï¼Œæ— éœ€é¢å¤–ä¿®æ”¹ã€‚

## ðŸš€ ä½¿ç”¨æ–¹å¼

### è‡ªåŠ¨é›†æˆ

æ‰€æœ‰ä¸»è¦è„šæœ¬éƒ½å·²é›†æˆæ»´ç­”æ¸…å•åŠŸèƒ½ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

- `daily_papers.py` - æ¯æ—¥ç›‘æŽ§åŽè‡ªåŠ¨åˆ›å»ºä»»åŠ¡
- `weekly_papers.py` - å‘¨æŠ¥ç”ŸæˆåŽè‡ªåŠ¨åˆ›å»ºä»»åŠ¡  
- `topic_papers.py` - ä¸»é¢˜æœç´¢åŽè‡ªåŠ¨åˆ›å»ºä»»åŠ¡

### æ‰‹åŠ¨æµ‹è¯•

```bash
# æµ‹è¯•APIè¿žæŽ¥å’Œä»»åŠ¡åˆ›å»º
uv run python test_dida_integration.py

# è¿è¡Œæ¯æ—¥ç›‘æŽ§ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼‰
uv run python daily_papers.py

# è¿è¡Œå‘¨æŠ¥ç”Ÿæˆï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼‰
uv run python weekly_papers.py

# è¿è¡Œä¸»é¢˜æœç´¢ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼‰
uv run python topic_papers.py
```

## ðŸ“‹ ä»»åŠ¡å†…å®¹è¯´æ˜Ž

### ä»»åŠ¡æ ‡é¢˜æ ¼å¼
- ðŸ“„ æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - YYYY-MM-DD
- ðŸ“š å‘¨æŠ¥è®ºæ–‡æ±‡æ€» - YYYY-MM-DD  
- ðŸŽ¯ ä¸»é¢˜è®ºæ–‡æœç´¢ - YYYY-MM-DD

### ä»»åŠ¡å†…å®¹åŒ…å«
- ðŸ“Š **ç»Ÿè®¡ä¿¡æ¯** - å‘çŽ°è®ºæ–‡æ•°é‡ã€ç›‘æŽ§ç ”ç©¶è€…æ•°é‡
- ðŸ“ **è¯¦ç»†ä¿¡æ¯** - è®ºæ–‡åˆ†å¸ƒã€ç ”ç©¶è€…è¯¦æƒ…ã€è®ºæ–‡æ ‡é¢˜æ‘˜è¦
- â° **æ‰§è¡Œæ—¶é—´** - ä»»åŠ¡æ‰§è¡Œçš„å…·ä½“æ—¶é—´
- ðŸ¤– **ç³»ç»Ÿæ ‡è¯†** - æ ‡æ³¨ä¸ºç”±ArXiv Followç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ

### ä»»åŠ¡ä¼˜å…ˆçº§
- **æ— ä¼˜å…ˆçº§(0)** - æœªå‘çŽ°è®ºæ–‡æ—¶
- **ä¸­ç­‰ä¼˜å…ˆçº§(1)** - å‘çŽ°å°‘é‡è®ºæ–‡æ—¶(1-9ç¯‡)
- **é«˜ä¼˜å…ˆçº§(2)** - å‘çŽ°å¤§é‡è®ºæ–‡æ—¶(10+ç¯‡)

### ä»»åŠ¡æ ‡ç­¾
- `arxiv` - æ‰€æœ‰ArXivç›¸å…³ä»»åŠ¡
- `è®ºæ–‡ç›‘æŽ§` - ç›‘æŽ§ç±»åž‹æ ‡è¯†
- `daily`/`weekly`/`topic` - å…·ä½“ä»»åŠ¡ç±»åž‹

## ðŸ› ï¸ é…ç½®å®šåˆ¶

### ä¿®æ”¹é…ç½®

ç¼–è¾‘ `config.py` æ–‡ä»¶ä¸­çš„ `DIDA_API_CONFIG` éƒ¨åˆ†ï¼š

```python
DIDA_API_CONFIG = {
    # æ˜¯å¦å¯ç”¨æ»´ç­”æ¸…å•é›†æˆ
    "enabled": True,
    
    # é»˜è®¤é¡¹ç›®IDï¼ˆæ”¶é›†ç®±ï¼‰
    "default_project_id": "inbox",
    
    # ä»»åŠ¡æ ‡ç­¾å‰ç¼€
    "tag_prefix": "arxiv",
    
    # ä»»åŠ¡ä¼˜å…ˆçº§æ˜ å°„
    "priority_mapping": {
        "no_papers": 0,    # æ— è®ºæ–‡æ—¶ä¼˜å…ˆçº§
        "has_papers": 1,   # æœ‰è®ºæ–‡æ—¶ä¼˜å…ˆçº§
        "many_papers": 2   # è®ºæ–‡è¾ƒå¤šæ—¶ä¼˜å…ˆçº§ï¼ˆ>=10ç¯‡ï¼‰
    },
    
    # è®ºæ–‡æ•°é‡é˜ˆå€¼
    "many_papers_threshold": 10
}
```

### ç¦ç”¨é›†æˆ

å¦‚æžœä¸æƒ³ä½¿ç”¨æ»´ç­”æ¸…å•é›†æˆï¼Œå¯ä»¥ï¼š

1. **åˆ é™¤çŽ¯å¢ƒå˜é‡**ï¼š
```bash
unset DIDA_ACCESS_TOKEN
```

2. **æˆ–ä¿®æ”¹é…ç½®**ï¼š
```python
DIDA_API_CONFIG = {
    "enabled": False,
    # ... å…¶ä»–é…ç½®
}
```

## ðŸ”§ æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **Tokenæ— æ•ˆæˆ–è¿‡æœŸ**
   - çŽ°è±¡ï¼šAPIè°ƒç”¨è¿”å›ž401é”™è¯¯
   - è§£å†³ï¼šé‡æ–°èŽ·å–access token

2. **ç½‘ç»œè¿žæŽ¥é—®é¢˜**
   - çŽ°è±¡ï¼šè¯·æ±‚è¶…æ—¶æˆ–è¿žæŽ¥å¤±è´¥
   - è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿žæŽ¥ï¼Œç¡®è®¤æ»´ç­”æ¸…å•æœåŠ¡å¯è®¿é—®

3. **ä»»åŠ¡åˆ›å»ºå¤±è´¥**
   - çŽ°è±¡ï¼šè¿”å›žå…¶ä»–HTTPé”™è¯¯ç 
   - è§£å†³ï¼šæ£€æŸ¥tokenæƒé™ï¼ŒæŸ¥çœ‹é”™è¯¯è¯¦æƒ…

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š

```python
import logging
logging.basicConfig(level=logging.DEBUG)
```

### éªŒè¯é…ç½®

è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼š

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run python test_dida_integration.py

# æŸ¥çœ‹è¯¦ç»†è¾“å‡º
DIDA_ACCESS_TOKEN="your_token" uv run python test_dida_integration.py
```

## ðŸ“š APIå‚è€ƒ

### ä¸»è¦å‡½æ•°

```python
from dida_integration import create_arxiv_task, test_dida_connection

# æµ‹è¯•è¿žæŽ¥
success = test_dida_connection()

# åˆ›å»ºä»»åŠ¡
result = create_arxiv_task(
    report_type="daily",  # daily/weekly/topic
    summary="ä»»åŠ¡æ‘˜è¦",
    details="è¯¦ç»†ä¿¡æ¯", 
    paper_count=5
)
```

### è¿”å›žå€¼æ ¼å¼

```python
{
    "success": True,
    "task_id": "task_id_string",
    "title": "ä»»åŠ¡æ ‡é¢˜",
    "url": "https://dida365.com/webapp/#/task/task_id"
}
```

## ðŸ”— ç›¸å…³é“¾æŽ¥

- [æ»´ç­”æ¸…å•å®˜ç½‘](https://dida365.com/)
- [æ»´ç­”æ¸…å•å¼€å‘è€…æ–‡æ¡£](https://developer.dida365.com/api)
- [OAuth TokenèŽ·å–å·¥å…·](https://dida-auth.vercel.app/)
- [ArXiv Follow é¡¹ç›®ä¸»é¡µ](https://github.com/your-username/arxiv_follow)

## ðŸ’¡ æç¤º

- Access Tokenå»ºè®®å®šæœŸæ›´æ–°ä»¥ç¡®ä¿å®‰å…¨
- å¯ä»¥åœ¨æ»´ç­”æ¸…å•Webç‰ˆæˆ–Appä¸­æŸ¥çœ‹å’Œç®¡ç†è‡ªåŠ¨åˆ›å»ºçš„ä»»åŠ¡
- ä»»åŠ¡åˆ›å»ºå¤±è´¥ä¸ä¼šå½±å“è®ºæ–‡ç›‘æŽ§è„šæœ¬çš„æ­£å¸¸æ‰§è¡Œ
- å»ºè®®åœ¨æœ¬åœ°å…ˆæµ‹è¯•APIè¿žæŽ¥ï¼Œç¡®è®¤æ— è¯¯åŽå†é…ç½®åˆ°GitHub Actionsä¸­
```

çŽ°åœ¨æ£€æŸ¥å¹¶æ›´æ–°GitHub Actionså·¥ä½œæµï¼Œç¡®ä¿é…ç½®äº†æ»´ç­”æ¸…å•APIçš„çŽ¯å¢ƒå˜é‡ï¼š

```github-actions-workflow
    - name: ðŸ” è¿è¡Œæ¯æ—¥è®ºæ–‡ç›‘æŽ§
      run: |
        echo "ðŸ• å½“å‰æ—¶é—´ (UTC): $(date)"
        echo "ðŸ•˜ åŒ—äº¬æ—¶é—´: $(TZ='Asia/Shanghai' date)"
        echo "=========================================="
        uv run python daily_papers.py
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´

->

    - name: ðŸ” è¿è¡Œæ¯æ—¥è®ºæ–‡ç›‘æŽ§
      run: |
        echo "ðŸ• å½“å‰æ—¶é—´ (UTC): $(date)"
        echo "ðŸ•˜ åŒ—äº¬æ—¶é—´: $(TZ='Asia/Shanghai' date)"
        echo "=========================================="
        uv run python daily_papers.py
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´
        DIDA_ACCESS_TOKEN: ${{ secrets.DIDA_ACCESS_TOKEN }}
```

```github-actions-workflow
    - name: ðŸ“š è¿è¡Œå‘¨æŠ¥è®ºæ–‡ç›‘æŽ§
      run: |
        echo "ðŸ• å½“å‰æ—¶é—´ (UTC): $(date)"
        echo "ðŸ•˜ åŒ—äº¬æ—¶é—´: $(TZ='Asia/Shanghai' date)"
        echo "ðŸ“… æœ¬å‘¨å‘¨æŠ¥ç”Ÿæˆ"
        echo "=========================================="
        uv run python weekly_papers.py
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´

->

    - name: ðŸ“š è¿è¡Œå‘¨æŠ¥è®ºæ–‡ç›‘æŽ§
      run: |
        echo "ðŸ• å½“å‰æ—¶é—´ (UTC): $(date)"
        echo "ðŸ•˜ åŒ—äº¬æ—¶é—´: $(TZ='Asia/Shanghai' date)"
        echo "ðŸ“… æœ¬å‘¨å‘¨æŠ¥ç”Ÿæˆ"
        echo "=========================================="
        uv run python weekly_papers.py
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´
        DIDA_ACCESS_TOKEN: ${{ secrets.DIDA_ACCESS_TOKEN }}
```

```github-actions-workflow
        fi
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´

->

        fi
      env:
        TZ: Asia/Shanghai  # è®¾ç½®æ—¶åŒºä¸ºä¸­å›½æ—¶é—´
        DIDA_ACCESS_TOKEN: ${{ secrets.DIDA_ACCESS_TOKEN }}
```

çŽ°åœ¨æ›´æ–°ä¸»README.mdæ–‡ä»¶ï¼Œæ·»åŠ æ»´ç­”æ¸…å•é›†æˆè¯´æ˜Žï¼š

```markdown
## ðŸš€ ç‰¹æ€§

- ðŸ“„ **æ¯æ—¥ç›‘æŽ§**: è‡ªåŠ¨æ£€æµ‹ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„æ–°è®ºæ–‡
- ðŸ“š **å‘¨æŠ¥æ±‡æ€»**: ç”Ÿæˆæœ€è¿‘ä¸€å‘¨çš„è®ºæ–‡æŠ¥å‘Š
- ðŸŽ¯ **ä¸»é¢˜æœç´¢**: åŸºäºŽç ”ç©¶é¢†åŸŸçš„æ™ºèƒ½è®ºæ–‡æœç´¢
- ðŸ” **æ™ºèƒ½æœç´¢**: æ”¯æŒè®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦å„é¢†åŸŸ
- ðŸ“… **æ™ºèƒ½æ—¥æœŸå›žé€€**: è‡ªåŠ¨å¤„ç†æ—¥æœŸèŒƒå›´æœç´¢æ— ç»“æžœçš„æƒ…å†µ
- ðŸ¤– **è‡ªåŠ¨åŒ–è¿è¡Œ**: GitHub Actions å®šæ—¶æ‰§è¡Œ
- ðŸ•˜ **ä¸­å›½æ—¶åŒº**: é€‚é…ä¸­å›½æ—¶é—´è¿è¡Œ

->

## ðŸš€ ç‰¹æ€§

- ðŸ“„ **æ¯æ—¥ç›‘æŽ§**: è‡ªåŠ¨æ£€æµ‹ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„æ–°è®ºæ–‡
- ðŸ“š **å‘¨æŠ¥æ±‡æ€»**: ç”Ÿæˆæœ€è¿‘ä¸€å‘¨çš„è®ºæ–‡æŠ¥å‘Š
- ðŸŽ¯ **ä¸»é¢˜æœç´¢**: åŸºäºŽç ”ç©¶é¢†åŸŸçš„æ™ºèƒ½è®ºæ–‡æœç´¢
- ðŸ” **æ™ºèƒ½æœç´¢**: æ”¯æŒè®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦å„é¢†åŸŸ
- ðŸ“… **æ™ºèƒ½æ—¥æœŸå›žé€€**: è‡ªåŠ¨å¤„ç†æ—¥æœŸèŒƒå›´æœç´¢æ— ç»“æžœçš„æƒ…å†µ
- ðŸ¤– **è‡ªåŠ¨åŒ–è¿è¡Œ**: GitHub Actions å®šæ—¶æ‰§è¡Œ
- ðŸ•˜ **ä¸­å›½æ—¶åŒº**: é€‚é…ä¸­å›½æ—¶é—´è¿è¡Œ
- ðŸ“ **æ»´ç­”æ¸…å•é›†æˆ**: è‡ªåŠ¨åˆ›å»ºä»»åŠ¡åˆ°ä½ çš„æ»´ç­”æ¸…å•
```

```markdown
- ðŸ“„ **æ¯æ—¥ç›‘æŽ§**: è‡ªåŠ¨æ£€æµ‹ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„æ–°è®ºæ–‡
- ðŸ“š **å‘¨æŠ¥æ±‡æ€»**: ç”Ÿæˆæœ€è¿‘ä¸€å‘¨çš„è®ºæ–‡æŠ¥å‘Š
- ðŸŽ¯ **ä¸»é¢˜æœç´¢**: åŸºäºŽç ”ç©¶é¢†åŸŸçš„æ™ºèƒ½è®ºæ–‡æœç´¢
- ðŸ” **æ™ºèƒ½æœç´¢**: æ”¯æŒè®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦å„é¢†åŸŸ
- ðŸ“… **æ™ºèƒ½æ—¥æœŸå›žé€€**: è‡ªåŠ¨å¤„ç†æ—¥æœŸèŒƒå›´æœç´¢æ— ç»“æžœçš„æƒ…å†µ
- ðŸ¤– **è‡ªåŠ¨åŒ–è¿è¡Œ**: GitHub Actions å®šæ—¶æ‰§è¡Œ
- ðŸ•˜ **ä¸­å›½æ—¶åŒº**: é€‚é…ä¸­å›½æ—¶é—´è¿è¡Œ

->

- ðŸ“„ **æ¯æ—¥ç›‘æŽ§**: è‡ªåŠ¨æ£€æµ‹ç ”ç©¶è€…å½“å¤©å‘å¸ƒçš„æ–°è®ºæ–‡
- ðŸ“š **å‘¨æŠ¥æ±‡æ€»**: ç”Ÿæˆæœ€è¿‘ä¸€å‘¨çš„è®ºæ–‡æŠ¥å‘Š
- ðŸŽ¯ **ä¸»é¢˜æœç´¢**: åŸºäºŽç ”ç©¶é¢†åŸŸçš„æ™ºèƒ½è®ºæ–‡æœç´¢
- ðŸ” **æ™ºèƒ½æœç´¢**: æ”¯æŒè®¡ç®—æœºç§‘å­¦å’Œç‰©ç†å­¦å„é¢†åŸŸ
- ðŸ“… **æ™ºèƒ½æ—¥æœŸå›žé€€**: è‡ªåŠ¨å¤„ç†æ—¥æœŸèŒƒå›´æœç´¢æ— ç»“æžœçš„æƒ…å†µ
- ðŸ¤– **è‡ªåŠ¨åŒ–è¿è¡Œ**: GitHub Actions å®šæ—¶æ‰§è¡Œ
- ðŸ•˜ **ä¸­å›½æ—¶åŒº**: é€‚é…ä¸­å›½æ—¶é—´è¿è¡Œ
- ðŸ“ **æ»´ç­”æ¸…å•é›†æˆ**: è‡ªåŠ¨åˆ›å»ºä»»åŠ¡åˆ°ä½ çš„æ»´ç­”æ¸…å•
```

```markdown
## ðŸ“ æ³¨æ„äº‹é¡¹

1. **æ—¶åŒºè½¬æ¢**: GitHub Actions ä½¿ç”¨ UTC æ—¶é—´ï¼Œå·²è‡ªåŠ¨è½¬æ¢ä¸ºä¸­å›½æ—¶é—´
2. **ç½‘ç»œé™åˆ¶**: arXiv å¯èƒ½æœ‰è®¿é—®é¢‘çŽ‡é™åˆ¶ï¼Œé¿å…è¿‡äºŽé¢‘ç¹çš„è¯·æ±‚
3. **æ•°æ®æº**: ä¾èµ– Google Sheetsï¼Œç¡®ä¿é“¾æŽ¥å¯è®¿é—®
4. **è®ºæ–‡è¯†åˆ«**: åŸºäºŽä½œè€…å§“åç²¾ç¡®åŒ¹é…ï¼Œæ³¨æ„å§“åæ‹¼å†™

->

## ðŸ“ æ»´ç­”æ¸…å•é›†æˆ

### ðŸŽ¯ åŠŸèƒ½æ¦‚è¿°
ç³»ç»Ÿå·²é›†æˆæ»´ç­”æ¸…å•APIï¼Œå¯åœ¨æ¯æ¬¡æ‰§è¡ŒåŽè‡ªåŠ¨åˆ›å»ºä»»åŠ¡ï¼š
- âœ… ç›‘æŽ§ç»“æžœè‡ªåŠ¨åŒæ­¥åˆ°æ»´ç­”æ¸…å•
- âœ… æ™ºèƒ½ä»»åŠ¡ä¼˜å…ˆçº§è®¾ç½®ï¼ˆåŸºäºŽå‘çŽ°è®ºæ–‡æ•°é‡ï¼‰
- âœ… è¯¦ç»†ä»»åŠ¡å†…å®¹ï¼ˆåŒ…å«è®ºæ–‡ç»Ÿè®¡å’Œè¯¦æƒ…ï¼‰
- âœ… é”™è¯¯ç›‘æŽ§ï¼ˆæ‰§è¡Œå¤±è´¥æ—¶ä¹Ÿä¼šåˆ›å»ºè®°å½•ä»»åŠ¡ï¼‰

### âš™ï¸ é…ç½®æ–¹æ³•

#### 1. èŽ·å– Access Token
è¯·å‚è€ƒ [æ»´ç­”æ¸…å•é›†æˆé…ç½®æŒ‡å—](./DIDA_INTEGRATION_GUIDE.md) èŽ·å–è¯¦ç»†æ­¥éª¤ã€‚

#### 2. é…ç½® GitHub Secrets
1. è¿›å…¥ä»“åº“ `Settings` â†’ `Secrets and variables` â†’ `Actions`
2. ç‚¹å‡» `New repository secret`
3. Name: `DIDA_ACCESS_TOKEN`
4. Secret: ä½ çš„æ»´ç­”æ¸…å•access token
5. ç‚¹å‡» `Add secret`

#### 3. æœ¬åœ°æµ‹è¯•
```bash
# è®¾ç½®çŽ¯å¢ƒå˜é‡
export DIDA_ACCESS_TOKEN="your_access_token_here"

# æµ‹è¯•è¿žæŽ¥
uv run python test_dida_integration.py

# è¿è¡Œè„šæœ¬ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡ï¼‰
uv run python daily_papers.py
```

### ðŸ“‹ ä»»åŠ¡ç¤ºä¾‹
åˆ›å»ºçš„ä»»åŠ¡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- **æ ‡é¢˜**: ðŸ“„ æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - 2025-01-15
- **å†…å®¹**: å‘çŽ°è®ºæ–‡æ•°é‡ã€ç ”ç©¶è€…ç»Ÿè®¡ã€è®ºæ–‡è¯¦æƒ…ç­‰
- **æ ‡ç­¾**: `arxiv`, `è®ºæ–‡ç›‘æŽ§`, `daily`/`weekly`/`topic`
- **ä¼˜å…ˆçº§**: åŸºäºŽå‘çŽ°è®ºæ–‡æ•°é‡æ™ºèƒ½è®¾ç½®

## ðŸ“ æ³¨æ„äº‹é¡¹

1. **æ—¶åŒºè½¬æ¢**: GitHub Actions ä½¿ç”¨ UTC æ—¶é—´ï¼Œå·²è‡ªåŠ¨è½¬æ¢ä¸ºä¸­å›½æ—¶é—´
2. **ç½‘ç»œé™åˆ¶**: arXiv å¯èƒ½æœ‰è®¿é—®é¢‘çŽ‡é™åˆ¶ï¼Œé¿å…è¿‡äºŽé¢‘ç¹çš„è¯·æ±‚
3. **æ•°æ®æº**: ä¾èµ– Google Sheetsï¼Œç¡®ä¿é“¾æŽ¥å¯è®¿é—®
4. **è®ºæ–‡è¯†åˆ«**: åŸºäºŽä½œè€…å§“åç²¾ç¡®åŒ¹é…ï¼Œæ³¨æ„å§“åæ‹¼å†™
5. **æ»´ç­”æ¸…å•**: APIé›†æˆæ˜¯å¯é€‰çš„ï¼Œä¸é…ç½®tokenä¸ä¼šå½±å“åŸºæœ¬åŠŸèƒ½
```

æœ€åŽæ£€æŸ¥å¹¶æ›´æ–°é¡¹ç›®çš„ä¾èµ–é…ç½®ï¼š

çŽ°åœ¨åˆ›å»ºä¸€ä¸ªå¿«é€Ÿå¼€å§‹æŒ‡å—ï¼Œæ€»ç»“æ»´ç­”æ¸…å•é›†æˆçš„ä½¿ç”¨æ–¹æ³•ï¼š

```markdown
# æ»´ç­”æ¸…å•é›†æˆ - å¿«é€Ÿå¼€å§‹

## ðŸš€ 5åˆ†é’Ÿå¿«é€Ÿé…ç½®

### 1. èŽ·å– Access Token
ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼ˆæœ€ç®€å•ï¼‰ï¼š
1. è®¿é—® https://dida-auth.vercel.app/
2. åœ¨æ»´ç­”æ¸…å•å¼€å‘è€…é¡µé¢åˆ›å»ºåº”ç”¨
3. æŒ‰å·¥å…·æŒ‡ç¤ºèŽ·å– Access Token

### 2. é…ç½®åˆ° GitHub Secrets
1. è¿›å…¥ä½ çš„ GitHub ä»“åº“
2. `Settings` â†’ `Secrets and variables` â†’ `Actions`
3. ç‚¹å‡» `New repository secret`
4. Name: `DIDA_ACCESS_TOKEN`
5. Secret: ç²˜è´´ä½ çš„ token
6. ä¿å­˜

### 3. æµ‹è¯•é…ç½®
```bash
# æœ¬åœ°æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
export DIDA_ACCESS_TOKEN="your_token"
uv run python test_dida_integration.py
```

## âœ… å®Œæˆï¼

çŽ°åœ¨æ¯æ¬¡ GitHub Actions è¿è¡Œæ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨åœ¨ä½ çš„æ»´ç­”æ¸…å•ä¸­åˆ›å»ºä»»åŠ¡ï¼š

- ðŸ“„ **æ¯æ—¥ç›‘æŽ§** â†’ æ¯æ—¥è®ºæ–‡å‘çŽ°æ±‡æ€»ä»»åŠ¡
- ðŸ“š **å‘¨æŠ¥æ±‡æ€»** â†’ æ¯å‘¨è®ºæ–‡ç»Ÿè®¡ä»»åŠ¡  
- ðŸŽ¯ **ä¸»é¢˜æœç´¢** â†’ ä¸»é¢˜è®ºæ–‡æœç´¢ç»“æžœä»»åŠ¡

## ðŸ“‹ ä»»åŠ¡å†…å®¹ç¤ºä¾‹

```
ðŸ“„ æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - 2025-01-15

ðŸŽ‰ ä»Šæ—¥å‘çŽ° 3 ç¯‡æ–°è®ºæ–‡ï¼

ðŸ“Š å…±å‘çŽ° 3 ç¯‡è®ºæ–‡

ðŸ“ è¯¦ç»†ä¿¡æ¯:
ç›‘æŽ§äº† 5 ä½ç ”ç©¶è€…

ðŸ“Š è®ºæ–‡åˆ†å¸ƒ:
â€¢ å¼ ä¸‰: 2 ç¯‡
  1. GPT-4åœ¨ç½‘ç»œå®‰å…¨ä¸­çš„åº”ç”¨ç ”ç©¶...
  2. åŸºäºŽæ·±åº¦å­¦ä¹ çš„æ¶æ„è½¯ä»¶æ£€æµ‹...
â€¢ æŽå››: 1 ç¯‡
  1. è”é‚¦å­¦ä¹ ä¸­çš„éšç§ä¿æŠ¤æœºåˆ¶...

â° ç”Ÿæˆæ—¶é—´: 2025-01-15 09:00:15
ðŸ¤– ç”± ArXiv Follow ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
```

## ðŸ› ï¸ è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `config.py` ä¸­çš„ `DIDA_API_CONFIG` æ¥è‡ªå®šä¹‰ï¼š
- ä»»åŠ¡ä¼˜å…ˆçº§è§„åˆ™
- æ ‡ç­¾å‰ç¼€
- è®ºæ–‡æ•°é‡é˜ˆå€¼

## ðŸ”§ æ•…éšœæŽ’é™¤

**é—®é¢˜**: ä»»åŠ¡åˆ›å»ºå¤±è´¥  
**è§£å†³**: æ£€æŸ¥ token æ˜¯å¦æ­£ç¡®ï¼Œé‡æ–°èŽ·å–æ–°çš„ token

**é—®é¢˜**: æ²¡æœ‰çœ‹åˆ°ä»»åŠ¡  
**è§£å†³**: ç¡®è®¤ GitHub Secrets é…ç½®æ­£ç¡®ï¼Œtoken åç§°ä¸º `DIDA_ACCESS_TOKEN`

## ðŸ“š è¯¦ç»†æ–‡æ¡£

å®Œæ•´é…ç½®æŒ‡å—ï¼š[DIDA_INTEGRATION_GUIDE.md](./DIDA_INTEGRATION_GUIDE.md)
```

## ðŸŽ‰ æ»´ç­”æ¸…å•APIé›†æˆå®Œæˆï¼

æˆ‘å·²ç»æˆåŠŸä¸ºä½ çš„ArXiv Followé¡¹ç›®é›†æˆäº†æ»´ç­”æ¸…å•APIåŠŸèƒ½ã€‚ä»¥ä¸‹æ˜¯å®Œæˆçš„å·¥ä½œæ€»ç»“ï¼š

### âœ… æ ¸å¿ƒåŠŸèƒ½
- **æ»´ç­”æ¸…å•APIæ¨¡å—** (`dida_integration.py`) - å®Œæ•´çš„APIå®¢æˆ·ç«¯
- **æ™ºèƒ½ä»»åŠ¡åˆ›å»º** - æ”¯æŒæ¯æ—¥/å‘¨æŠ¥/ä¸»é¢˜æœç´¢ä¸‰ç§ç±»åž‹
- **ä¼˜é›…é”™è¯¯å¤„ç†** - APIå¤±è´¥ä¸å½±å“åŸºæœ¬è®ºæ–‡ç›‘æŽ§åŠŸèƒ½
- **å®Œæ•´æµ‹è¯•å¥—ä»¶** (`test_dida_integration.py`) - éªŒè¯æ‰€æœ‰åŠŸèƒ½

### âœ… è‡ªåŠ¨é›†æˆ
- **æ¯æ—¥ç›‘æŽ§** â†’ è‡ªåŠ¨åˆ›å»ºæ¯æ—¥è®ºæ–‡å‘çŽ°æ±‡æ€»ä»»åŠ¡
- **å‘¨æŠ¥æ±‡æ€»** â†’ è‡ªåŠ¨åˆ›å»ºæ¯å‘¨è®ºæ–‡ç»Ÿè®¡ä»»åŠ¡
- **ä¸»é¢˜æœç´¢** â†’ è‡ªåŠ¨åˆ›å»ºä¸»é¢˜æœç´¢ç»“æžœä»»åŠ¡
- **é”™è¯¯ç›‘æŽ§** â†’ æ‰§è¡Œå¤±è´¥æ—¶è‡ªåŠ¨åˆ›å»ºé”™è¯¯è®°å½•ä»»åŠ¡

### âœ… GitHub Actionsé…ç½®
- å·²æ›´æ–°æ‰€æœ‰å·¥ä½œæµæ–‡ä»¶ï¼Œæ”¯æŒä»ŽGitHub Secretsè¯»å–`DIDA_ACCESS_TOKEN`
- å®Œå…¨å…¼å®¹çŽ°æœ‰CI/CDæµç¨‹

### âœ… æ™ºèƒ½ç‰¹æ€§
- **ä¼˜å…ˆçº§æ˜ å°„** - æ ¹æ®å‘çŽ°è®ºæ–‡æ•°é‡æ™ºèƒ½è®¾ç½®ä»»åŠ¡ä¼˜å…ˆçº§
- **è¯¦ç»†å†…å®¹** - åŒ…å«è®ºæ–‡ç»Ÿè®¡ã€ç ”ç©¶è€…åˆ†å¸ƒã€è®ºæ–‡æ ‡é¢˜ç­‰
- **æ ‡ç­¾åˆ†ç±»** - è‡ªåŠ¨æ·»åŠ `arxiv`ã€`è®ºæ–‡ç›‘æŽ§`ã€ç±»åž‹æ ‡ç­¾
- **æ—¶é—´æˆ³** - è®°å½•æ‰§è¡Œæ—¶é—´å’Œç³»ç»Ÿæ ‡è¯†

### ðŸ“š ä½¿ç”¨æŒ‡å—
1. **å¿«é€Ÿå¼€å§‹**: [DIDA_QUICKSTART.md](./DIDA_QUICKSTART.md) - 5åˆ†é’Ÿå¿«é€Ÿé…ç½®
2. **è¯¦ç»†æŒ‡å—**: [DIDA_INTEGRATION_GUIDE.md](./DIDA_INTEGRATION_GUIDE.md) - å®Œæ•´é…ç½®è¯´æ˜Ž

### ðŸš€ ç«‹å³ä½¿ç”¨

**ç¬¬ä¸€æ­¥**: èŽ·å–æ»´ç­”æ¸…å•Access Token
- è®¿é—® https://dida-auth.vercel.app/
- æŒ‰ç…§æŒ‡å¼•èŽ·å–token

**ç¬¬äºŒæ­¥**: é…ç½®GitHub Secrets
- è¿›å…¥ä»“åº“ `Settings` â†’ `Secrets and variables` â†’ `Actions`
- æ·»åŠ  secret: `DIDA_ACCESS_TOKEN` = ä½ çš„token

**ç¬¬ä¸‰æ­¥**: äº«å—è‡ªåŠ¨åŒ–ï¼
- æ¯æ¬¡GitHub Actionsè¿è¡ŒåŽéƒ½ä¼šè‡ªåŠ¨åœ¨æ»´ç­”æ¸…å•ä¸­åˆ›å»ºä»»åŠ¡
- å¯ä»¥åœ¨æ»´ç­”æ¸…å•ä¸­æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰è®ºæ–‡ç›‘æŽ§ç»“æžœ

### ðŸ’¡ ç‰¹åˆ«ä¼˜åŠ¿
- **å¯é€‰æ€§** - ä¸é…ç½®tokenä¸ä¼šå½±å“ä»»ä½•çŽ°æœ‰åŠŸèƒ½
- **ç¨³å®šæ€§** - APIå¤±è´¥æ—¶ä¼šæœ‰è¯¦ç»†é”™è¯¯ä¿¡æ¯ä½†ä¸ä¸­æ–­ä¸»æµç¨‹
- **å®žç”¨æ€§** - ä»»åŠ¡å†…å®¹ä¸°å¯Œï¼ŒåŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯
- **æ™ºèƒ½åŒ–** - æ ¹æ®ç»“æžœè‡ªåŠ¨è°ƒæ•´ä¼˜å…ˆçº§å’Œå†…å®¹

çŽ°åœ¨ä½ çš„ArXivè®ºæ–‡ç›‘æŽ§ç³»ç»Ÿä¸ä»…èƒ½è‡ªåŠ¨å‘çŽ°è®ºæ–‡ï¼Œè¿˜èƒ½è‡ªåŠ¨åœ¨ä½ çš„å¾…åŠžæ¸…å•ä¸­åˆ›å»ºä»»åŠ¡æé†’ä½ æŸ¥çœ‹ç»“æžœï¼ðŸŽ¯

---

**User**

çŽ°åœ¨æˆ‘å°†ååŠ©ä½ æµ‹è¯• æ»´ç­”æ¸…å•API æˆ‘ä¼šå°†token è®¾ç½®åˆ°çŽ¯å¢ƒå˜é‡ ç”±äºŽæˆ‘ä¸ç¡®å®šä½ æ˜¯å¦èƒ½è®¿é—®åˆ° æ‹¥æœ‰token çŽ¯å¢ƒå˜é‡çš„ shell æ‰€ä»¥ä½ åªéœ€è¦æä¾›å‘½ä»¤å³å¯ æˆ‘ä¼šæ‰§è¡Œå¹¶è¿”å›žä½ ç»“æžœ 

---

**Cursor**

å¤ªå¥½äº†ï¼æˆ‘æ¥ä¸ºä½ æä¾›ä¸€ç³»åˆ—æµ‹è¯•å‘½ä»¤ï¼Œè¯·æŒ‰é¡ºåºæ‰§è¡Œï¼Œæˆ‘ä»¬ä¸€èµ·éªŒè¯æ»´ç­”æ¸…å•APIé›†æˆåŠŸèƒ½ã€‚

## ðŸ§ª æ»´ç­”æ¸…å•APIé›†æˆæµ‹è¯•

### ç¬¬ä¸€æ­¥ï¼šåŸºç¡€è¿žæŽ¥æµ‹è¯•
```bash
# æµ‹è¯•APIè¿žæŽ¥å’Œå®Œæ•´åŠŸèƒ½
uv run python test_dida_integration.py
```

**é¢„æœŸç»“æžœ**: åº”è¯¥çœ‹åˆ°æ‰€æœ‰4ä¸ªæµ‹è¯•éƒ½é€šè¿‡ï¼Œç‰¹åˆ«æ˜¯APIè¿žæŽ¥æµ‹è¯•æˆåŠŸã€‚

---

### ç¬¬äºŒæ­¥ï¼šå•ç‹¬æµ‹è¯•APIè¿žæŽ¥
```bash
# ç›´æŽ¥æµ‹è¯•è¿žæŽ¥
uv run python dida_integration.py
```

**é¢„æœŸç»“æžœ**: åº”è¯¥æ˜¾ç¤ºè¿žæŽ¥æˆåŠŸå¹¶åˆ›å»ºä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ã€‚

---

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•ArXivä»»åŠ¡åˆ›å»ºåŠŸèƒ½
```bash
# æµ‹è¯•æ¯æ—¥ä»»åŠ¡åˆ›å»º
uv run python -c "
from dida_integration import create_arxiv_task
import json

# æµ‹è¯•æ¯æ—¥ç›‘æŽ§ä»»åŠ¡
result1 = create_arxiv_task('daily', 'æµ‹è¯•ï¼šä»Šæ—¥å‘çŽ°2ç¯‡æ–°è®ºæ–‡', 'ç›‘æŽ§äº†3ä½ç ”ç©¶è€…\nè®ºæ–‡åˆ†å¸ƒ:\nâ€¢ æµ‹è¯•ç ”ç©¶è€…A: 1ç¯‡\nâ€¢ æµ‹è¯•ç ”ç©¶è€…B: 1ç¯‡', 2)
print('æ¯æ—¥ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result1, ensure_ascii=False, indent=2))

# æµ‹è¯•å‘¨æŠ¥ä»»åŠ¡  
result2 = create_arxiv_task('weekly', 'æµ‹è¯•ï¼šæœ¬å‘¨æ— æ–°è®ºæ–‡å‘çŽ°', 'ç›‘æŽ§äº†3ä½ç ”ç©¶è€…\nç›‘æŽ§å‘¨æœŸ: 2025-01-08 è‡³ 2025-01-15', 0)
print('\nå‘¨æŠ¥ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result2, ensure_ascii=False, indent=2))

# æµ‹è¯•ä¸»é¢˜æœç´¢ä»»åŠ¡
result3 = create_arxiv_task('topic', 'æµ‹è¯•ï¼šä¸»é¢˜æœç´¢å‘çŽ°5ç¯‡è®ºæ–‡\nä¸»é¢˜: cs.AI AND cs.CR', 'æœç´¢ä¸»é¢˜: cs.AI AND cs.CR\nä½¿ç”¨ç­–ç•¥: æ™ºèƒ½æ—¥æœŸå›žé€€\nå‘çŽ°è®ºæ–‡:\n1. æµ‹è¯•è®ºæ–‡æ ‡é¢˜1\n2. æµ‹è¯•è®ºæ–‡æ ‡é¢˜2', 5)
print('\nä¸»é¢˜æœç´¢ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result3, ensure_ascii=False, indent=2))
"
```

**é¢„æœŸç»“æžœ**: åº”è¯¥æˆåŠŸåˆ›å»º3ä¸ªä¸åŒç±»åž‹çš„æµ‹è¯•ä»»åŠ¡ï¼Œæ¯ä¸ªéƒ½æœ‰å¯¹åº”çš„ä»»åŠ¡IDã€‚

---

### ç¬¬å››æ­¥ï¼šæµ‹è¯•å®žé™…è„šæœ¬é›†æˆï¼ˆæ¨¡æ‹Ÿè¿è¡Œï¼‰
```bash
# æµ‹è¯•æ¯æ—¥ç›‘æŽ§è„šæœ¬é›†æˆï¼ˆä¼šåˆ›å»ºçœŸå®žä»»åŠ¡ï¼‰
echo "æµ‹è¯•æ¯æ—¥ç›‘æŽ§è„šæœ¬é›†æˆ..."
uv run python daily_papers.py
```

**é¢„æœŸç»“æžœ**: 
- è„šæœ¬æ­£å¸¸æ‰§è¡Œè®ºæ–‡æœç´¢
- æœ€åŽæ˜¾ç¤º"ðŸ“ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡..."
- æ˜¾ç¤º"âœ… æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ!"

---

### ç¬¬äº”æ­¥ï¼šéªŒè¯ä»»åŠ¡æ˜¯å¦å‡ºçŽ°åœ¨æ»´ç­”æ¸…å•ä¸­
è¯·æ£€æŸ¥ä½ çš„æ»´ç­”æ¸…å•åº”ç”¨ï¼ˆWebç‰ˆæˆ–ç§»åŠ¨ç«¯ï¼‰ï¼Œåº”è¯¥èƒ½çœ‹åˆ°åˆšæ‰åˆ›å»ºçš„ä»»åŠ¡ã€‚

---

## ðŸ“‹ æµ‹è¯•æ£€æŸ¥åˆ—è¡¨

è¯·åœ¨æ‰§è¡Œæ¯ä¸ªå‘½ä»¤åŽå‘Šè¯‰æˆ‘ç»“æžœï¼Œæˆ‘ä»¬ä¸€èµ·ç¡®è®¤ï¼š

- [ ] **è¿žæŽ¥æµ‹è¯•** - APIèƒ½å¦æ­£å¸¸è¿žæŽ¥
- [ ] **åŸºç¡€ä»»åŠ¡** - èƒ½å¦åˆ›å»ºç®€å•ä»»åŠ¡  
- [ ] **ArXivä»»åŠ¡** - èƒ½å¦åˆ›å»ºè®ºæ–‡ç›‘æŽ§ä¸“ç”¨ä»»åŠ¡
- [ ] **è„šæœ¬é›†æˆ** - è®ºæ–‡ç›‘æŽ§è„šæœ¬èƒ½å¦è‡ªåŠ¨åˆ›å»ºä»»åŠ¡
- [ ] **ä»»åŠ¡å¯è§** - æ»´ç­”æ¸…å•ä¸­èƒ½å¦çœ‹åˆ°åˆ›å»ºçš„ä»»åŠ¡

è¯·å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œç„¶åŽæŠŠç»“æžœå‘Šè¯‰æˆ‘ï¼Œæˆ‘ä»¬é€æ­¥éªŒè¯æ¯ä¸ªåŠŸèƒ½ï¼ðŸš€

```shellscript
# æµ‹è¯•APIè¿žæŽ¥å’Œå®Œæ•´åŠŸèƒ½
uv run python test_dida_integration.py
```

```shellscript
# ç›´æŽ¥æµ‹è¯•è¿žæŽ¥
uv run python dida_integration.py
```

```shellscript
# æµ‹è¯•æ¯æ—¥ä»»åŠ¡åˆ›å»º
uv run python -c "
from dida_integration import create_arxiv_task
import json

# æµ‹è¯•æ¯æ—¥ç›‘æŽ§ä»»åŠ¡
result1 = create_arxiv_task('daily', 'æµ‹è¯•ï¼šä»Šæ—¥å‘çŽ°2ç¯‡æ–°è®ºæ–‡', 'ç›‘æŽ§äº†3ä½ç ”ç©¶è€…\nè®ºæ–‡åˆ†å¸ƒ:\nâ€¢ æµ‹è¯•ç ”ç©¶è€…A: 1ç¯‡\nâ€¢ æµ‹è¯•ç ”ç©¶è€…B: 1ç¯‡', 2)
print('æ¯æ—¥ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result1, ensure_ascii=False, indent=2))

# æµ‹è¯•å‘¨æŠ¥ä»»åŠ¡  
result2 = create_arxiv_task('weekly', 'æµ‹è¯•ï¼šæœ¬å‘¨æ— æ–°è®ºæ–‡å‘çŽ°', 'ç›‘æŽ§äº†3ä½ç ”ç©¶è€…\nç›‘æŽ§å‘¨æœŸ: 2025-01-08 è‡³ 2025-01-15', 0)
print('\nå‘¨æŠ¥ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result2, ensure_ascii=False, indent=2))

# æµ‹è¯•ä¸»é¢˜æœç´¢ä»»åŠ¡
result3 = create_arxiv_task('topic', 'æµ‹è¯•ï¼šä¸»é¢˜æœç´¢å‘çŽ°5ç¯‡è®ºæ–‡\nä¸»é¢˜: cs.AI AND cs.CR', 'æœç´¢ä¸»é¢˜: cs.AI AND cs.CR\nä½¿ç”¨ç­–ç•¥: æ™ºèƒ½æ—¥æœŸå›žé€€\nå‘çŽ°è®ºæ–‡:\n1. æµ‹è¯•è®ºæ–‡æ ‡é¢˜1\n2. æµ‹è¯•è®ºæ–‡æ ‡é¢˜2', 5)
print('\nä¸»é¢˜æœç´¢ä»»åŠ¡åˆ›å»ºç»“æžœ:', json.dumps(result3, ensure_ascii=False, indent=2))
"
```

```shellscript
# æµ‹è¯•æ¯æ—¥ç›‘æŽ§è„šæœ¬é›†æˆï¼ˆä¼šåˆ›å»ºçœŸå®žä»»åŠ¡ï¼‰
echo "æµ‹è¯•æ¯æ—¥ç›‘æŽ§è„šæœ¬é›†æˆ..."
uv run python daily_papers.py
```

---

**User**

æ‰§è¡Œå¤±è´¥äº†æˆ‘ä¼šæä¾›ä½ ä¸€ä¸ªæˆåŠŸçš„ æ‰§è¡Œ è¯·å‚è€ƒ è§£å†³ ***âžœ\*** ***arxiv_follow\*** ***git:(\******main\******)\*** ***âœ—\*** *curl* *'https://api.dida365.com/open/v1/task'* *\*

 *-H* *'accept: \*/*'* *\*

 *-H* *'accept-language: zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7'* *\*

 *-H* *'authorization: Bearer è„±æ•äº†'* *\*

 *-H* *'content-type: application/json'* *\*

 *-H* *'origin: https://dida-auth.vercel.app'* *\*

 *-H* *'priority: u=1, i'* *\*

 *-H* *'referer: https://dida-auth.vercel.app/'* *\*

 *-H* *'sec-ch-ua: "Microsoft Edge";v="137", "Chromium";v="137", "Not/A)Brand";v="24"'* *\*

 *-H* *'sec-ch-ua-mobile: ?0'* *\*

 *-H* *'sec-ch-ua-platform: "macOS"'* *\*

 *-H* *'sec-fetch-dest: empty'* *\*

 *-H* *'sec-fetch-mode: cors'* *\*

 *-H* *'sec-fetch-site: cross-site'* *\*

 *-H* *'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36 Edg/137.0.0.0'* *\*

 *--data-raw* *'{"title":"This is a task created by API Token"}'*

*{"id":"685f9966e4b0ba3802aa3ff5","projectId":"inbox1026360765","sortOrder":-5498631880704,"title":"This is a task created by API Token","timeZone":"Asia/Shanghai","isAllDay":false,"priority":0,"status":0,"tags":[],"etag":"k9dk3nf9","kind":"TEXT"}****%\*** 

---

**Cursor**

å¤ªå¥½äº†ï¼æˆ‘å‘çŽ°é—®é¢˜äº†ã€‚ä»Žä½ æä¾›çš„æˆåŠŸè¯·æ±‚å¯ä»¥çœ‹åˆ°ï¼Œæ»´ç­”æ¸…å•APIä½¿ç”¨çš„æ˜¯ **`open/v1`** ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä»£ç ä¸­çš„ **`api/v2`** ç‰ˆæœ¬ã€‚

è®©æˆ‘ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼š

## ðŸ”§ APIç‰ˆæœ¬ä¿®å¤

```python
        self.base_url = "https://api.dida365.com/api/v2"

->

        self.base_url = "https://api.dida365.com/open/v1"
```

çŽ°åœ¨è¿˜éœ€è¦ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯èŽ·å–çš„endpointï¼Œå› ä¸º `open/v1` ç‰ˆæœ¬å¯èƒ½æ²¡æœ‰ç”¨æˆ·ä¿¡æ¯æŽ¥å£ï¼š

```python
    def get_user_info(self) -> Dict[str, Any]:
        """
        èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºŽæµ‹è¯•APIè¿žæŽ¥ï¼‰
        
        Returns:
            ç”¨æˆ·ä¿¡æ¯æˆ–é”™è¯¯ä¿¡æ¯
        """
        if not self.is_enabled():
            return {"success": False, "error": "APIæœªå¯ç”¨"}
        
        try:
            with httpx.Client(timeout=30.0) as client:
                response = client.get(
                    f"{self.base_url}/user",
                    headers=self.headers
                )
                
                if response.status_code == 200:
                    user_data = response.json()
                    logger.info("æˆåŠŸèŽ·å–æ»´ç­”æ¸…å•ç”¨æˆ·ä¿¡æ¯")
                    return {
                        "success": True,
                        "username": user_data.get("username", ""),
                        "email": user_data.get("email", "")
                    }
                else:
                    logger.error(f"èŽ·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥: {response.status_code}")
                    return {
                        "success": False,
                        "error": f"HTTP {response.status_code}"
                    }
                    
        except Exception as e:
            logger.error(f"èŽ·å–ç”¨æˆ·ä¿¡æ¯æ—¶å‘ç”Ÿé”™è¯¯: {e}")
            return {"success": False, "error": str(e)}

->

    def get_user_info(self) -> Dict[str, Any]:
        """
        æµ‹è¯•APIè¿žæŽ¥ï¼ˆé€šè¿‡åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•ä»»åŠ¡ï¼‰
        
        Returns:
            è¿žæŽ¥æµ‹è¯•ç»“æžœ
        """
        if not self.is_enabled():
            return {"success": False, "error": "APIæœªå¯ç”¨"}
        
        try:
            # ä½¿ç”¨åˆ›å»ºä»»åŠ¡æ¥æµ‹è¯•è¿žæŽ¥ï¼ˆå› ä¸ºopen/v1ç‰ˆæœ¬æ²¡æœ‰ç”¨æˆ·ä¿¡æ¯æŽ¥å£ï¼‰
            test_task_data = {
                "title": "ðŸ§ª APIè¿žæŽ¥æµ‹è¯•ä»»åŠ¡ï¼ˆå°†è‡ªåŠ¨åˆ é™¤ï¼‰"
            }
            
            with httpx.Client(timeout=30.0) as client:
                response = client.post(
                    f"{self.base_url}/task",
                    headers=self.headers,
                    json=test_task_data
                )
                
                if response.status_code == 200:
                    result = response.json()
                    task_id = result.get("id")
                    logger.info("æ»´ç­”æ¸…å•APIè¿žæŽ¥æµ‹è¯•æˆåŠŸ")
                    
                    # å°è¯•åˆ é™¤æµ‹è¯•ä»»åŠ¡ï¼ˆæ¸…ç†ï¼‰
                    try:
                        delete_response = client.delete(
                            f"{self.base_url}/task/{task_id}",
                            headers=self.headers
                        )
                        if delete_response.status_code == 200:
                            logger.info("æµ‹è¯•ä»»åŠ¡å·²è‡ªåŠ¨æ¸…ç†")
                    except:
                        logger.warning("æµ‹è¯•ä»»åŠ¡æ¸…ç†å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨åˆ é™¤")
                    
                    return {
                        "success": True,
                        "message": "APIè¿žæŽ¥æ­£å¸¸",
                        "test_task_id": task_id
                    }
                else:
                    logger.error(f"APIè¿žæŽ¥æµ‹è¯•å¤±è´¥: {response.status_code} - {response.text}")
                    return {
                        "success": False,
                        "error": f"HTTP {response.status_code}: {response.text}"
                    }
                    
        except Exception as e:
            logger.error(f"APIè¿žæŽ¥æµ‹è¯•æ—¶å‘ç”Ÿé”™è¯¯: {e}")
            return {"success": False, "error": str(e)}
```

çŽ°åœ¨æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„API URLï¼š

```python
    # APIåŸºç¡€URL
    "base_url": "https://api.dida365.com/api/v2",

->

    # APIåŸºç¡€URL
    "base_url": "https://api.dida365.com/open/v1",
```

```json
{"title":"This is a task created by API Token"}
```

```json
{
  "id":"685f9966e4b0ba3802aa3ff5",
  "projectId":"inbox1026360765",
  "sortOrder":-5498631880704,
  "title":"This is a task created by API Token",
  "timeZone":"Asia/Shanghai",
  "isAllDay":false,
  "priority":0,
  "status":0,
  "tags":[],
  "etag":"k9dk3nf9",
  "kind":"TEXT"
}
```

çŽ°åœ¨æˆ‘éœ€è¦ç®€åŒ–ä»»åŠ¡åˆ›å»ºçš„æ•°æ®ç»“æž„ï¼Œå› ä¸ºAPIå¯èƒ½å¯¹ä¸€äº›å­—æ®µæœ‰è¦æ±‚ã€‚è®©æˆ‘ä¿®æ”¹create_taskæ–¹æ³•ï¼š

```python
        # æž„å»ºä»»åŠ¡æ•°æ®
        task_data = {
            "title": title,
            "content": content,
            "projectId": project_id,
            "priority": priority,
            "kind": "TEXT"
        }
        
        # æ·»åŠ æˆªæ­¢æ—¥æœŸ
        if due_date:
            task_data["dueDate"] = f"{due_date}T23:59:59.000+0000"
        
        # æ·»åŠ æ ‡ç­¾
        if tags:
            task_data["tags"] = tags

->

        # æž„å»ºä»»åŠ¡æ•°æ®ï¼ˆä½¿ç”¨ç®€åŒ–æ ¼å¼ï¼‰
        task_data = {
            "title": title
        }
        
        # æ·»åŠ å†…å®¹ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼Œä½œä¸ºæè¿°ï¼‰
        if content:
            task_data["content"] = content
        
        # æ·»åŠ ä¼˜å…ˆçº§ï¼ˆå¦‚æžœä¸æ˜¯é»˜è®¤å€¼ï¼‰
        if priority > 0:
            task_data["priority"] = priority
        
        # æ·»åŠ æˆªæ­¢æ—¥æœŸ
        if due_date:
            task_data["dueDate"] = f"{due_date}T23:59:59.000+0000"
        
        # æ·»åŠ æ ‡ç­¾
        if tags:
            task_data["tags"] = tags
```

çŽ°åœ¨æ›´æ–°æµ‹è¯•è¿žæŽ¥å‡½æ•°ä¸­çš„æ—¥å¿—ä¿¡æ¯ï¼š

```python
    result = dida_client.get_user_info()
    if result.get("success"):
        logger.info(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥æˆåŠŸï¼Œç”¨æˆ·ï¼š{result.get('username', 'æœªçŸ¥')}")
        return True
    else:
        logger.warning(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥å¤±è´¥ï¼š{result.get('error', 'æœªçŸ¥é”™è¯¯')}")
        return False

->

    result = dida_client.get_user_info()
    if result.get("success"):
        logger.info(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥æˆåŠŸ")
        return True
    else:
        logger.warning(f"æ»´ç­”æ¸…å•APIè¿žæŽ¥å¤±è´¥ï¼š{result.get('error', 'æœªçŸ¥é”™è¯¯')}")
        return False
```

## âœ… ä¿®å¤å®Œæˆï¼çŽ°åœ¨è¯·é‡æ–°æµ‹è¯•

æˆ‘å·²ç»ä¿®å¤äº†APIç‰ˆæœ¬é—®é¢˜ã€‚ä¸»è¦ä¿®æ”¹ï¼š

1. **APIç‰ˆæœ¬**: `api/v2` â†’ `open/v1`
2. **è¿žæŽ¥æµ‹è¯•**: ä½¿ç”¨åˆ›å»ºä»»åŠ¡æ¥æµ‹è¯•è¿žæŽ¥ï¼ˆè€Œä¸æ˜¯èŽ·å–ç”¨æˆ·ä¿¡æ¯ï¼‰
3. **ä»»åŠ¡æ•°æ®**: ç®€åŒ–ä¸ºç¬¦åˆAPIè¦æ±‚çš„æ ¼å¼

è¯·çŽ°åœ¨é‡æ–°æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼š

### ðŸ§ª é‡æ–°æµ‹è¯•

```bash
# ç¬¬ä¸€æ­¥ï¼šé‡æ–°è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
uv run python test_dida_integration.py
```

**é¢„æœŸç»“æžœ**: çŽ°åœ¨åº”è¯¥çœ‹åˆ°æ‰€æœ‰4ä¸ªæµ‹è¯•éƒ½é€šè¿‡äº†ï¼

---

å¦‚æžœç¬¬ä¸€ä¸ªæµ‹è¯•æˆåŠŸï¼Œè¯·ç»§ç»­ï¼š

```bash
# ç¬¬äºŒæ­¥ï¼šç›´æŽ¥æµ‹è¯•APIè¿žæŽ¥å’Œä»»åŠ¡åˆ›å»º
uv run python dida_integration.py
```

**é¢„æœŸç»“æžœ**: åº”è¯¥æ˜¾ç¤ºè¿žæŽ¥æˆåŠŸå¹¶åˆ›å»ºä¸€ä¸ªæµ‹è¯•ä»»åŠ¡ã€‚

---

è¯·å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªå‘½ä»¤ï¼Œå‘Šè¯‰æˆ‘ç»“æžœå¦‚ä½•ã€‚å¦‚æžœè¿˜æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­è°ƒè¯•ï¼ðŸ”§

```shellscript
# ç¬¬ä¸€æ­¥ï¼šé‡æ–°è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
uv run python test_dida_integration.py
```

```shellscript
# ç¬¬äºŒæ­¥ï¼šç›´æŽ¥æµ‹è¯•APIè¿žæŽ¥å’Œä»»åŠ¡åˆ›å»º
uv run python dida_integration.py
```

---

**User**

éªŒè¯é€šè¿‡äº†å¯ä»¥çœ‹åˆ° 

---

**Cursor**

ðŸŽ‰ **å¤ªæ£’äº†ï¼æ»´ç­”æ¸…å•APIé›†æˆå®Œå…¨æˆåŠŸï¼**

ä»Žæµ‹è¯•ç»“æžœå¯ä»¥çœ‹åˆ°ï¼š

## âœ… æµ‹è¯•æˆåŠŸæ€»ç»“

1. **APIè¿žæŽ¥**: âœ… æˆåŠŸè¿žæŽ¥åˆ°æ»´ç­”æ¸…å•API
2. **ä»»åŠ¡åˆ›å»º**: âœ… æˆåŠŸåˆ›å»ºå„ç§ç±»åž‹çš„ä»»åŠ¡
3. **ä»»åŠ¡é“¾æŽ¥**: âœ… è¿”å›žæ­£ç¡®çš„ä»»åŠ¡IDå’Œé“¾æŽ¥
4. **é”™è¯¯å¤„ç†**: âœ… æ— æ•ˆtokenæ­£ç¡®è¿”å›žå¤±è´¥
5. **è‡ªåŠ¨æ¸…ç†**: âœ… æµ‹è¯•ä»»åŠ¡èƒ½å¤Ÿè‡ªåŠ¨åˆ é™¤

**ðŸŽ¯ æ€»ä½“ç»“æžœ**: 4/4 ä¸ªæµ‹è¯•é€šè¿‡ - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼

---

## ðŸš€ çŽ°åœ¨æµ‹è¯•å®žé™…è„šæœ¬é›†æˆ

è®©æˆ‘ä»¬æµ‹è¯•çœŸå®žçš„è®ºæ–‡ç›‘æŽ§è„šæœ¬æ˜¯å¦èƒ½æ­£ç¡®é›†æˆæ»´ç­”æ¸…å•ï¼š

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•æ¯æ—¥ç›‘æŽ§è„šæœ¬é›†æˆ
```bash
# æµ‹è¯•æ¯æ—¥è®ºæ–‡ç›‘æŽ§ï¼ˆä¼šåˆ›å»ºçœŸå®žçš„ç›‘æŽ§ä»»åŠ¡ï¼‰
uv run python daily_papers.py
```

**é¢„æœŸç»“æžœ**: 
- è„šæœ¬æ­£å¸¸æœç´¢è®ºæ–‡
- æœ€åŽæ˜¾ç¤º"ðŸ“ åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡..."
- æ˜¾ç¤º"âœ… æ»´ç­”æ¸…å•ä»»åŠ¡åˆ›å»ºæˆåŠŸ!"

---

### ç¬¬å››æ­¥ï¼šæµ‹è¯•ä¸»é¢˜æœç´¢è„šæœ¬é›†æˆ
```bash
# æµ‹è¯•ä¸»é¢˜è®ºæ–‡æœç´¢ï¼ˆä¼šåˆ›å»ºä¸»é¢˜æœç´¢ä»»åŠ¡ï¼‰
uv run python topic_papers.py
```

**é¢„æœŸç»“æžœ**: 
- è„šæœ¬æ­£å¸¸æœç´¢è®ºæ–‡
- æœ€åŽè‡ªåŠ¨åˆ›å»ºæ»´ç­”æ¸…å•ä»»åŠ¡

---

## ðŸ“± éªŒè¯æ»´ç­”æ¸…å•ä¸­çš„ä»»åŠ¡

è¯·æ£€æŸ¥ä½ çš„æ»´ç­”æ¸…å•åº”ç”¨ï¼ˆç½‘é¡µç‰ˆæˆ–æ‰‹æœºAppï¼‰ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š

1. **æµ‹è¯•ä»»åŠ¡**ï¼ˆä»Žåˆšæ‰çš„æµ‹è¯•åˆ›å»ºçš„ï¼‰ï¼š
   - ðŸ§ª ArXiv Follow æµ‹è¯•ä»»åŠ¡
   - ðŸ“„ æ¯æ—¥è®ºæ–‡ç›‘æŽ§ - 2025-06-28
   - ðŸ“š å‘¨æŠ¥è®ºæ–‡æ±‡æ€» - 2025-06-28  
   - ðŸŽ¯ ä¸»é¢˜è®ºæ–‡æœç´¢ - 2025-06-28

2. **å³å°†åˆ›å»ºçš„çœŸå®žä»»åŠ¡**ï¼ˆä»Žè„šæœ¬è¿è¡Œåˆ›å»ºçš„ï¼‰

---

è¯·æ‰§è¡Œç¬¬ä¸‰æ­¥çš„å‘½ä»¤ï¼Œçœ‹çœ‹æ¯æ—¥ç›‘æŽ§è„šæœ¬æ˜¯å¦èƒ½æ­£ç¡®é›†æˆæ»´ç­”æ¸…å•åŠŸèƒ½ï¼ ðŸŽ¯

```shellscript
# æµ‹è¯•æ¯æ—¥è®ºæ–‡ç›‘æŽ§ï¼ˆä¼šåˆ›å»ºçœŸå®žçš„ç›‘æŽ§ä»»åŠ¡ï¼‰
uv run python daily_papers.py
```

```shellscript
# æµ‹è¯•ä¸»é¢˜è®ºæ–‡æœç´¢ï¼ˆä¼šåˆ›å»ºä¸»é¢˜æœç´¢ä»»åŠ¡ï¼‰
uv run python topic_papers.py
```

---

**User**

å¥½çš„ è¯·æ¸…ç†ä¸­é—´æ–‡ä»¶ 

---

**Cursor**

å¥½çš„ï¼æˆ‘æ¥å¸®ä½ æ¸…ç†æµ‹è¯•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶å’Œä¸´æ—¶æ–‡ä»¶ã€‚

## ðŸ§¹ æ¸…ç†ä¸­é—´æ–‡ä»¶

```bash
# æ¸…ç†æŠ¥å‘Šæ–‡ä»¶ç›®å½•
rm -rf reports/

# æ¸…ç†å¯èƒ½çš„æ—¥å¿—æ–‡ä»¶
rm -rf logs/

# æ¸…ç†Pythonç¼“å­˜æ–‡ä»¶
find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true
find . -name "*.pyc" -delete 2>/dev/null || true
find . -name "*.pyo" -delete 2>/dev/null || true

# æ¸…ç†å¯èƒ½çš„ä¸´æ—¶æ–‡ä»¶
rm -f *.tmp
rm -f *.log

# æ˜¾ç¤ºæ¸…ç†åŽçš„ç›®å½•ç»“æž„
echo "ðŸ§¹ æ¸…ç†å®Œæˆï¼Œå½“å‰ç›®å½•ç»“æž„ï¼š"
ls -la
```

è¿™ä¸ªå‘½ä»¤ä¼šæ¸…ç†ï¼š

1. **`reports/`** - è®ºæ–‡æœç´¢ç»“æžœæ–‡ä»¶
2. **`logs/`** - å¯èƒ½çš„æ—¥å¿—æ–‡ä»¶  
3. **`__pycache__/`** - Pythonå­—èŠ‚ç ç¼“å­˜
4. **`*.pyc`, `*.pyo`** - Pythonç¼–è¯‘æ–‡ä»¶
5. **`*.tmp`, `*.log`** - ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶

æ‰§è¡ŒåŽï¼Œé¡¹ç›®ç›®å½•å°†ä¿æŒå¹²å‡€ï¼Œåªä¿ç•™æºä»£ç æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶ã€‚

è¯·æ‰§è¡Œè¿™ä¸ªæ¸…ç†å‘½ä»¤ï¼ðŸ—‘ï¸

```shellscript
# æ¸…ç†æŠ¥å‘Šæ–‡ä»¶ç›®å½•
rm -rf reports/

# æ¸…ç†å¯èƒ½çš„æ—¥å¿—æ–‡ä»¶
rm -rf logs/

# æ¸…ç†Pythonç¼“å­˜æ–‡ä»¶
find . -name "__pycache__" -type d -exec rm -rf {} + 2>/dev/null || true
find . -name "*.pyc" -delete 2>/dev/null || true
find . -name "*.pyo" -delete 2>/dev/null || true

# æ¸…ç†å¯èƒ½çš„ä¸´æ—¶æ–‡ä»¶
rm -f *.tmp
rm -f *.log

# æ˜¾ç¤ºæ¸…ç†åŽçš„ç›®å½•ç»“æž„
echo "ðŸ§¹ æ¸…ç†å®Œæˆï¼Œå½“å‰ç›®å½•ç»“æž„ï¼š"
ls -la
```

---

**User**

ä½ çŽ°åœ¨å¯ä»¥ç›´æŽ¥æ‰§è¡Œå‘½ä»¤äº†

---

**Cursor**

å¥½çš„ï¼æˆ‘æ¥ç›´æŽ¥æ‰§è¡Œæ¸…ç†å‘½ä»¤ï¼š

âœ… æ¸…ç†å®Œæˆï¼

**å·²æ¸…ç†çš„æ–‡ä»¶ç±»åž‹ï¼š**
- `reports/` å’Œ `logs/` ç›®å½•
- `__pycache__/` Pythonç¼“å­˜ç›®å½•  
- `*.pyc` å’Œ `*.pyo` ç¼–è¯‘æ–‡ä»¶
- ä¸´æ—¶æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶

**ä¿ç•™çš„æ–‡ä»¶ï¼š**
- æ‰€æœ‰æºä»£ç æ–‡ä»¶
- é…ç½®æ–‡ä»¶
- æ–°çš„æ»´ç­”æ¸…å•é›†æˆæ¨¡å—
- æ–‡æ¡£å’ŒæŒ‡å—

çŽ°åœ¨é¡¹ç›®ç›®å½•å¾ˆå¹²å‡€ï¼Œåªä¿ç•™å¿…è¦çš„æºä»£ç å’Œé…ç½®æ–‡ä»¶ã€‚æ‰€æœ‰æ»´ç­”æ¸…å•é›†æˆçš„ä»£ç éƒ½åœ¨ç­‰å¾…æäº¤åˆ°Gitã€‚ä½ å¯ä»¥ç»§ç»­å¼€å‘æˆ–æµ‹è¯•åŠŸèƒ½äº†ï¼

